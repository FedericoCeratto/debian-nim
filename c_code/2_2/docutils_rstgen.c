/* Generated by Nim Compiler v0.12.0 */
/*   (c) 2015 Andreas Rumpf */
/* The generated code is subject to the original license. */
#define NIM_INTBITS 64

#include "nimbase.h"
#include <string.h>
#include <dirent.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <time.h>
#include <stdio.h>
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct Cell48947 Cell48947;
typedef struct TNimType TNimType;
typedef struct Cellseq48963 Cellseq48963;
typedef struct Gcheap51018 Gcheap51018;
typedef struct Gcstack51016 Gcstack51016;
typedef struct Cellset48959 Cellset48959;
typedef struct Pagedesc48955 Pagedesc48955;
typedef struct Memregion30891 Memregion30891;
typedef struct Smallchunk30843 Smallchunk30843;
typedef struct Llchunk30885 Llchunk30885;
typedef struct Bigchunk30845 Bigchunk30845;
typedef struct Intset30817 Intset30817;
typedef struct Trunk30813 Trunk30813;
typedef struct Avlnode30889 Avlnode30889;
typedef struct Gcstat51014 Gcstat51014;
typedef struct Rstgenerator347016 Rstgenerator347016;
typedef struct Rstnode332011 Rstnode332011;
typedef struct Rstnodeseq332009 Rstnodeseq332009;
typedef struct TNimObject TNimObject;
typedef struct TNimNode TNimNode;
typedef struct Stringtableobj145212 Stringtableobj145212;
typedef struct TY347035 TY347035;
typedef struct Table347053 Table347053;
typedef struct Keyvaluepairseq347056 Keyvaluepairseq347056;
typedef struct Tocentry347012 Tocentry347012;
typedef struct Codeblockparams347020 Codeblockparams347020;
typedef struct Keyvaluepair145208 Keyvaluepair145208;
typedef struct Generaltokenizer341023 Generaltokenizer341023;
typedef struct TY123809 TY123809;
typedef struct TY351504 TY351504;
typedef struct TY130408 TY130408;
typedef struct TY351507 TY351507;
typedef struct Indexentry348397 Indexentry348397;
typedef struct Table348410 Table348410;
typedef struct Keyvaluepairseq348413 Keyvaluepairseq348413;
typedef struct Keyvaluepair348416 Keyvaluepair348416;
typedef struct TY349074 TY349074;
typedef struct TY349075 TY349075;
typedef struct Slice90370 Slice90370;
typedef struct Basechunk30841 Basechunk30841;
typedef struct Freecell30833 Freecell30833;
typedef struct Keyvaluepairseq145210 Keyvaluepairseq145210;
typedef struct Keyvaluepair347059 Keyvaluepair347059;
struct  TGenericSeq  {
NI len;
NI reserved;
};
struct  NimStringDesc  {
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];
};
struct  Cell48947  {
NI refcount;
TNimType* typ;
};
struct  Cellseq48963  {
NI len;
NI cap;
Cell48947** d;
};
struct  Cellset48959  {
NI counter;
NI max;
Pagedesc48955* head;
Pagedesc48955** data;
};
typedef Smallchunk30843* TY30906[512];
typedef Trunk30813* Trunkbuckets30815[256];
struct  Intset30817  {
Trunkbuckets30815 data;
};
struct  Memregion30891  {
NI minlargeobj;
NI maxlargeobj;
TY30906 freesmallchunks;
Llchunk30885* llmem;
NI currmem;
NI maxmem;
NI freemem;
NI lastsize;
Bigchunk30845* freechunkslist;
Intset30817 chunkstarts;
Avlnode30889* root;
Avlnode30889* deleted;
Avlnode30889* last;
Avlnode30889* freeavlnodes;
};
struct  Gcstat51014  {
NI stackscans;
NI cyclecollections;
NI maxthreshold;
NI maxstacksize;
NI maxstackcells;
NI cycletablesize;
NI64 maxpause;
};
struct  Gcheap51018  {
Gcstack51016* stack;
void* stackbottom;
NI cyclethreshold;
Cellseq48963 zct;
Cellseq48963 decstack;
Cellset48959 cycleroots;
Cellseq48963 tempstack;
NI recgclock;
Memregion30891 region;
Gcstat51014 stat;
};
struct  Rstnode332011  {
NU8 kind;
NimStringDesc* text;
NI level;
Rstnodeseq332009* sons;
};
typedef N_NIMCALL_PTR(void, TY3889) (void* p, NI op);
typedef N_NIMCALL_PTR(void*, TY3894) (void* p);
struct  TNimType  {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
TY3889 marker;
TY3894 deepcopy;
};
struct  TNimObject  {
TNimType* m_type;
};
typedef N_NIMCALL_PTR(NimStringDesc*, Findfilehandler333023) (NimStringDesc* filename);
typedef N_NIMCALL_PTR(void, Msghandler333021) (NimStringDesc* filename, NI line, NI col, NU8 msgkind, NimStringDesc* arg);
typedef NimStringDesc* TY347045[5];
struct  Table347053  {
Keyvaluepairseq347056* data;
NI counter;
};
struct  Rstgenerator347016  {
  TNimObject Sup;
NU8 target;
Stringtableobj145212* config;
NI splitafter;
NI listingcounter;
TY347035* tocpart;
NIM_BOOL hastoc;
NimStringDesc* theindex;
NU8 options;
Findfilehandler333023 findfile;
Msghandler333021 msghandler;
NimStringDesc* filename;
TY347045 meta;
NimStringDesc* currentsection;
Table347053 seenindexterms;
};
struct  Tocentry347012  {
Rstnode332011* n;
NimStringDesc* refname;
NimStringDesc* header;
};
typedef NimStringDesc* TY194829[4];
typedef NimStringDesc* TY192421[1];
typedef NU8 TY213407[32];
typedef NimStringDesc* TY193306[2];
struct  Codeblockparams347020  {
NIM_BOOL numberlines;
NI startline;
NimStringDesc* langstr;
NU8 lang;
};
struct Keyvaluepair145208 {
NimStringDesc* Field0;
NimStringDesc* Field1;
};
typedef NimStringDesc* TY253724[1];
struct  Generaltokenizer341023  {
  TNimObject Sup;
NU8 kind;
NI start;
NI length;
NCSTRING buf;
NI pos;
NU8 state;
};
struct  TNimNode  {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
typedef NimStringDesc* TY341090[33];
struct TY123809 {
NimStringDesc* Field0;
NimStringDesc* Field1;
NimStringDesc* Field2;
};
struct  Indexentry348397  {
NimStringDesc* keyword;
NimStringDesc* link;
NimStringDesc* linktitle;
NimStringDesc* linkdesc;
};
struct  Table348410  {
Keyvaluepairseq348413* data;
NI counter;
};
struct TY351504 {
TY130408* Field0;
TY351507* Field1;
Table348410 Field2;
};
typedef NIM_CHAR TY113386[256];
typedef struct {
N_NIMCALL_PTR(NI, ClPrc) (NimStringDesc* x_352107, NimStringDesc* y_352109, void* ClEnv);
void* ClEnv;
} TY352105;
typedef N_CLOSURE_PTR(NI, TMP5183) (NimStringDesc* x_352094, NimStringDesc* y_352096, void* ClEnv);
struct Keyvaluepair348416 {
NI Field0;
Indexentry348397 Field1;
TY351507* Field2;
};
typedef struct {
N_NIMCALL_PTR(NI, ClPrc) (Indexentry348397* x_350029, Indexentry348397* y_350031, void* ClEnv);
void* ClEnv;
} TY350027;
typedef N_CLOSURE_PTR(NI, TMP5187) (Indexentry348397* x_351330, Indexentry348397* y_351332, void* ClEnv);
typedef N_CLOSURE_PTR(NI, TMP5197) (Indexentry348397* x_350016, Indexentry348397* y_350018, void* ClEnv);
struct TY349075 {
NI Field0;
NimStringDesc* Field1;
};
struct  Slice90370  {
NI a;
NI b;
};
typedef NimStringDesc* TY193293[3];
struct  Gcstack51016  {
Gcstack51016* prev;
Gcstack51016* next;
void* starts;
void* pos;
NI maxstacksize;
};
typedef NI TY30822[8];
struct  Pagedesc48955  {
Pagedesc48955* next;
NI key;
TY30822 bits;
};
struct  Basechunk30841  {
NI prevsize;
NI size;
NIM_BOOL used;
};
struct  Smallchunk30843  {
  Basechunk30841 Sup;
Smallchunk30843* next;
Smallchunk30843* prev;
Freecell30833* freelist;
NI free;
NI acc;
NF data;
};
struct  Llchunk30885  {
NI size;
NI acc;
Llchunk30885* next;
};
struct  Bigchunk30845  {
  Basechunk30841 Sup;
Bigchunk30845* next;
Bigchunk30845* prev;
NI align;
NF data;
};
struct  Trunk30813  {
Trunk30813* next;
NI key;
TY30822 bits;
};
typedef Avlnode30889* TY30896[2];
struct  Avlnode30889  {
TY30896 link;
NI key;
NI upperbound;
NI level;
};
struct  Stringtableobj145212  {
  TNimObject Sup;
NI counter;
Keyvaluepairseq145210* data;
NU8 mode;
};
struct Keyvaluepair347059 {
NI Field0;
NimStringDesc* Field1;
NI Field2;
};
struct  Freecell30833  {
Freecell30833* next;
NI zerofield;
};
struct TY347035 {
  TGenericSeq Sup;
  Tocentry347012 data[SEQ_DECL_SIZE];
};
struct Rstnodeseq332009 {
  TGenericSeq Sup;
  Rstnode332011* data[SEQ_DECL_SIZE];
};
struct TY130408 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
struct TY351507 {
  TGenericSeq Sup;
  Indexentry348397 data[SEQ_DECL_SIZE];
};
struct TY349074 {
  TGenericSeq Sup;
  TY349075 data[SEQ_DECL_SIZE];
};
struct Keyvaluepairseq347056 {
  TGenericSeq Sup;
  Keyvaluepair347059 data[SEQ_DECL_SIZE];
};
struct Keyvaluepairseq348413 {
  TGenericSeq Sup;
  Keyvaluepair348416 data[SEQ_DECL_SIZE];
};
struct Keyvaluepairseq145210 {
  TGenericSeq Sup;
  Keyvaluepair145208 data[SEQ_DECL_SIZE];
};
N_NIMCALL(NimStringDesc*, copyStringRC1)(NimStringDesc* src);
static N_INLINE(void, nimGCunrefNoCycle)(void* p);
static N_INLINE(Cell48947*, usrtocell_52646)(void* usr);
static N_INLINE(void, rtladdzct_54204)(Cell48947* c);
N_NOINLINE(void, addzct_52617)(Cellseq48963* s, Cell48947* c);
N_NIMCALL(void, renderaux_347734)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result);
N_NIMCALL(NI, len_332090)(Rstnode332011* n);
N_NIMCALL(void, renderrsttoout_347724)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result);
N_NIMCALL(void, renderheadline_353861)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* src);
N_NIMCALL(void, unsureAsgnRef)(void** dest, void* src);
N_NIMCALL(NimStringDesc*, rstnodetorefname_333067)(Rstnode332011* n);
static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src);
N_NIMCALL(NimStringDesc*, rawNewString)(NI space);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* seq, NI elemsize, NI newlen);
static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src);
N_NIMCALL(void, dispa_347689)(NU8 target, NimStringDesc** dest, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argsLen0);
N_NIMCALL(void, nsuAddf)(NimStringDesc** s, NimStringDesc* formatstr, NimStringDesc** a, NI aLen0);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI x);
N_NIMCALL(NimStringDesc*, nimCharToStr)(NIM_CHAR x);
N_NIMCALL(void, setindexterm_347855)(Rstgenerator347016* d, NimStringDesc* id, NimStringDesc* term, NimStringDesc* linktitle, NimStringDesc* linkdesc);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* s, NIM_CHAR c);
N_NIMCALL(NimStringDesc*, noschangeFileExt)(NimStringDesc* filename, NimStringDesc* ext);
N_NIMCALL(NimStringDesc*, nosextractFilename)(NimStringDesc* path);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* dest, NI addlen);
static N_INLINE(void, appendChar)(NimStringDesc* dest, NIM_CHAR c);
N_NIMCALL(NimStringDesc*, quoteindexcolumn_347835)(NimStringDesc* text);
N_NIMCALL(NimStringDesc*, nsuReplaceStr)(NimStringDesc* s, NimStringDesc* sub, NimStringDesc* by);
N_NIMCALL(void, insert_92001)(NimStringDesc** x, NimStringDesc* item, NI i);
N_NIMCALL(NimStringDesc*, striptochtml_353841)(NimStringDesc* s);
N_NIMCALL(NI, nsuFindChar)(NimStringDesc* s, NIM_CHAR sub, NI start);
N_NIMCALL(void, nsuDelete)(NimStringDesc** s, NI first, NI last);
N_NIMCALL(NimStringDesc*, nsuRepeatChar)(NIM_CHAR c, NI count);
N_NIMCALL(void, renderoverline_354045)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result);
N_NIMCALL(void, renderaux_347776)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc* frmta, NimStringDesc* frmtb, NimStringDesc** result);
N_NIMCALL(void, renderfield_355717)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result);
N_NIMCALL(NimStringDesc*, addnodes_333073)(Rstnode332011* n);
N_NIMCALL(NimStringDesc*, esc_347553)(NU8 target, NimStringDesc* s, NI splitafter);
N_NIMCALL(NI, nextsplitpoint_347506)(NimStringDesc* s, NI start);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* a, NimStringDesc* b);
static N_INLINE(void, escchar_347494)(NU8 target, NimStringDesc** dest, NIM_CHAR c);
N_NIMCALL(void, addxmlchar_347456)(NimStringDesc** dest, NIM_CHAR c);
N_NIMCALL(void, addtexchar_347478)(NimStringDesc** dest, NIM_CHAR c);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* s, NIM_BOOL leading, NIM_BOOL trailing, TY213407 chars);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* a, NimStringDesc* b);
N_NOINLINE(void, raiseassert_90971)(NimStringDesc* msg);
N_NIMCALL(NimStringDesc*, texcolumns_355677)(Rstnode332011* n);
N_NIMCALL(Rstnode332011*, lastson_332153)(Rstnode332011* n);
N_NIMCALL(void, renderimage_354213)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result);
N_NIMCALL(NimStringDesc*, getfieldvalue_333079)(Rstnode332011* n, NimStringDesc* fieldname);
N_NIMCALL(NIM_BOOL, allcharsinset_103130)(NimStringDesc* s, TY213407 theset);
N_NIMCALL(NimStringDesc*, dispf_347666)(NU8 target, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argsLen0);
N_NIMCALL(NimStringDesc*, nsuFormatOpenArray)(NimStringDesc* formatstr, NimStringDesc** a, NI aLen0);
N_NIMCALL(NimStringDesc*, getargument_333086)(Rstnode332011* n);
N_NIMCALL(void, rendercodeblock_355233)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result);
N_NIMCALL(void, parsecodeblockparams_354508)(Rstgenerator347016* d, Rstnode332011* n, Codeblockparams347020* Result);
N_NIMCALL(void, init_347086)(Codeblockparams347020* p);
N_NIMCALL(void, parsecodeblockfield_354493)(Rstgenerator347016* d, Rstnode332011* n, Codeblockparams347020* params);
N_NIMCALL(NimStringDesc*, nsuToLowerStr)(NimStringDesc* s);
N_NIMCALL(NI, npuParseInt)(NimStringDesc* s, NI* number, NI start);
N_NIMCALL(NimStringDesc*, getfieldvalue_336314)(Rstnode332011* n);
N_NIMCALL(NU8, getsourcelanguage_341099)(NimStringDesc* name);
N_NOINLINE(void, chckNil)(void* p);
N_NIMCALL(void, buildlineshtmltable_355035)(Rstgenerator347016* d, Codeblockparams347020* params, NimStringDesc* code, Keyvaluepair145208* Result);
N_NIMCALL(NimStringDesc*, nsuFormatSingleElem)(NimStringDesc* formatstr, NimStringDesc* a);
N_NIMCALL(NimStringDesc*, getordefault_146020)(Stringtableobj145212* t, NimStringDesc* key);
N_NIMCALL(NI, nsuCountLines)(NimStringDesc* s);
N_NIMCALL(void, initgeneraltokenizer_341289)(Generaltokenizer341023* g, NimStringDesc* buf);
N_NIMCALL(void, getnexttoken_343766)(Generaltokenizer341023* g, NU8 lang);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* s, NI start_81016, NI last);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* s, NI first, NI last);
N_NIMCALL(void, deinitgeneraltokenizer_341300)(Generaltokenizer341023* g);
N_NIMCALL(void, rendercontainer_355658)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result);
N_NIMCALL(void, renderindexterm_348068)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result);
N_NIMCALL(NIM_BOOL, haskey_348076)(Table347053 t, NimStringDesc* key);
N_NIMCALL(void, HEX5BHEX5DHEX3D_348152)(Table347053* t, NimStringDesc* key, NI val);
N_NIMCALL(NI, getordefault_348120)(Table347053 t, NimStringDesc* key);
N_NIMCALL(void, rendersmiley_354479)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result);
N_NIMCALL(void, nimGCvisit)(void* d, NI op);
N_NIMCALL(void, TMP5018)(void* p, NI op);
N_NIMCALL(void*, newSeq)(TNimType* typ, NI len);
N_NIMCALL(void, nossplitFile)(NimStringDesc* path, TY123809* Result);
N_NIMCALL(void, inittable_347124)(NI initialsize, Table347053* Result);
N_NIMCALL(NI, nsuParseInt)(NimStringDesc* s);
N_NIMCALL(void, rendertocentry_354162)(Rstgenerator347016* d, Tocentry347012* e, NimStringDesc** result);
N_NIMCALL(void, rendertocentries_354176)(Rstgenerator347016* d, NI* j, NI lvl, NimStringDesc** result);
N_NIMCALL(void, writefile_16875)(NimStringDesc* filename, NimStringDesc* content);
N_NIMCALL(void, readindexdir_351501)(NimStringDesc* dir, TY351504* Result);
N_NIMCALL(void, inittable_351529)(NI initialsize, Table348410* Result);
N_NIMCALL(void, TMP5175)(void* p, NI op);
N_NIMCALL(NimStringDesc*, cstrToNimstr)(NCSTRING str);
N_NIMCALL(NimStringDesc*, HEX2F_123481)(NimStringDesc* head, NimStringDesc* tail);
static N_INLINE(NIM_BOOL, direxists_127020)(NimStringDesc* dir);
N_NIMCALL(NIM_BOOL, nosexistsDir)(NimStringDesc* dir);
N_NIMCALL(NIM_BOOL, nsuEndsWith)(NimStringDesc* s, NimStringDesc* suffix);
N_NIMCALL(FILE*, open_16817)(NimStringDesc* filename, NU8 mode, NI bufsize);
N_NIMCALL(NimStringDesc*, rawNewString)(NI cap);
N_NIMCALL(NIM_BOOL, readline_16919)(FILE* f, NimStringDesc** line);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* s, NI start);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* s, NI first);
N_NIMCALL(NIM_BOOL, isdocumentationtitle_348979)(NimStringDesc* hyperlink);
N_NIMCALL(TY130408*, nsuSplitChar)(NimStringDesc* s, NIM_CHAR sep);
N_NIMCALL(NimStringDesc*, unquoteindexcolumn_347845)(NimStringDesc* text);
N_NIMCALL(TGenericSeq*, incrSeqV2)(TGenericSeq* seq, NI elemsize);
N_NIMCALL(NI, len_351860)(Table348410 t);
N_NIMCALL(void, HEX5BHEX5DHEX3D_351872)(Table348410* t, Indexentry348397* key, TY351507* val);
static N_INLINE(NI, HEX21HEX26_142013)(NI h, NI val);
N_NIMCALL(NI, hash_142848)(NimStringDesc* x);
static N_INLINE(NimStringDesc*, or_347713)(NimStringDesc* x, NimStringDesc* y);
static N_INLINE(NI, HEX21HEX24_142042)(NI h);
N_NIMCALL(void, sort_352098)(NimStringDesc** a, NI aLen0, TY352105 cmp, NU8 order);
N_NIMCALL(NI, cmp_6577)(NimStringDesc* x, NimStringDesc* y);
N_NIMCALL(void, genericSeqAssign)(void* dest, void* src_85804, TNimType* mt);
N_NIMCALL(NimStringDesc*, generatedocumentationjumps_350796)(Table348410 docs);
static N_INLINE(NIM_BOOL, isfilled_170281)(NI hcode);
N_NIMCALL(void, sort_350020)(Indexentry348397* a, NI aLen0, TY350027 cmp, NU8 order);
N_NIMCALL(NI, cmp_348436)(Indexentry348397* a, Indexentry348397* b);
N_NIMCALL(NimStringDesc*, nsuJoinSep)(NimStringDesc** a, NI aLen0, NimStringDesc* sep);
N_NIMCALL(NimStringDesc*, generatemodulejumps_351436)(TY130408* modules);
N_NIMCALL(NimStringDesc*, generatedocumentationindex_349431)(Table348410 docs);
N_NIMCALL(NimStringDesc*, generatedocumentationtoc_349068)(TY351507* entries);
N_NIMCALL(void, TMP5199)(void* p, NI op);
N_NIMCALL(void, striptoclevel_348989)(NimStringDesc* s, TY349075* Result);
static N_INLINE(NimStringDesc*, HEX5BHEX5D_90363)(NimStringDesc* s, Slice90370 x);
static N_INLINE(Slice90370, HEX2EHEX2E_105291)(NI a, NI b);
N_NIMCALL(NimStringDesc*, indenttolevel_349056)(NI* level, NI newlevel);
N_NIMCALL(NimStringDesc*, nsuRepeatStr)(NimStringDesc* s, NI n);
N_NIMCALL(TY351507*, getordefault_350683)(Table348410 t, Indexentry348397* key);
N_NIMCALL(void, sortindex_348826)(Indexentry348397* a, NI aLen0);
N_NIMCALL(void, HEX3CHEX2D_348815)(Indexentry348397* a, Indexentry348397* b);
N_NIMCALL(NimStringDesc*, generatesymbolindex_348903)(TY351507* symbols);
STRING_LITERAL(TMP979, "<wbr />", 7);
STRING_LITERAL(TMP2204, "", 0);
STRING_LITERAL(TMP2206, "-", 1);
STRING_LITERAL(TMP2207, "\012<h$1><a class=\"toc-backref\" id=\"$2\" href=\"#$2\">$3</a></h$1>", 60);
STRING_LITERAL(TMP2208, "\\rsth$4{$3}\\label{$2}\012", 22);
STRING_LITERAL(TMP2209, "\012<h$1 id=\"$2\">$3</h$1>", 22);
STRING_LITERAL(TMP2210, "html", 4);
STRING_LITERAL(TMP2211, "\\", 1);
STRING_LITERAL(TMP2212, "\\\\", 2);
STRING_LITERAL(TMP2213, "\012", 1);
STRING_LITERAL(TMP2214, "\\n", 2);
STRING_LITERAL(TMP2215, "\011", 1);
STRING_LITERAL(TMP2216, "\\t", 2);
STRING_LITERAL(TMP2217, "<h$1 id=\"$2\"><center>$3</center></h$1>", 38);
STRING_LITERAL(TMP2218, "\\rstov$4{$3}\\label{$2}\012", 23);
STRING_LITERAL(TMP2219, "<hr />\012", 7);
STRING_LITERAL(TMP2220, "\\hrule\012", 7);
STRING_LITERAL(TMP2221, "<p>$1</p>\012", 10);
STRING_LITERAL(TMP2222, "$1\012\012", 4);
STRING_LITERAL(TMP2223, "<ul class=\"simple\">$1</ul>\012", 27);
STRING_LITERAL(TMP2224, "\\begin{itemize}$1\\end{itemize}\012", 31);
STRING_LITERAL(TMP2225, "<li>$1</li>\012", 12);
STRING_LITERAL(TMP2226, "\\item $1\012", 9);
STRING_LITERAL(TMP2227, "<ol class=\"simple\">$1</ol>\012", 27);
STRING_LITERAL(TMP2228, "\\begin{enumerate}$1\\end{enumerate}\012", 35);
STRING_LITERAL(TMP2229, "<dl class=\"docutils\">$1</dl>\012", 29);
STRING_LITERAL(TMP2230, "\\begin{description}$1\\end{description}\012", 39);
STRING_LITERAL(TMP2231, "<dt>$1</dt>\012", 12);
STRING_LITERAL(TMP2232, "\\item[$1] ", 10);
STRING_LITERAL(TMP2233, "<dd>$1</dd>\012", 12);
STRING_LITERAL(TMP2234, "$1\012", 3);
STRING_LITERAL(TMP2235, "<table class=\"docinfo\" frame=\"void\" rules=\"none\"><col class=\"do"
"cinfo-name\" /><col class=\"docinfo-content\" /><tbody valign=\"top\""
">$1</tbody></table>", 146);
STRING_LITERAL(TMP2236, " ", 1);
STRING_LITERAL(TMP2237, "&amp;", 5);
STRING_LITERAL(TMP2238, "&lt;", 4);
STRING_LITERAL(TMP2239, "&gt;", 4);
STRING_LITERAL(TMP2240, "&quot;", 6);
STRING_LITERAL(TMP2241, "\\_", 2);
STRING_LITERAL(TMP2242, "\\symbol{123}", 12);
STRING_LITERAL(TMP2243, "\\symbol{125}", 12);
STRING_LITERAL(TMP2244, "\\symbol{91}", 11);
STRING_LITERAL(TMP2245, "\\symbol{93}", 11);
STRING_LITERAL(TMP2246, "\\symbol{92}", 11);
STRING_LITERAL(TMP2247, "\\$", 2);
STRING_LITERAL(TMP2248, "\\&", 2);
STRING_LITERAL(TMP2249, "\\#", 2);
STRING_LITERAL(TMP2250, "\\%", 2);
STRING_LITERAL(TMP2251, "\\symbol{126}", 12);
STRING_LITERAL(TMP2252, "\\symbol{64}", 11);
STRING_LITERAL(TMP2253, "\\symbol{94}", 11);
STRING_LITERAL(TMP2254, "\\symbol{96}", 11);
static NIM_CONST TY213407 TMP2255 = {
0x00, 0x3E, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
STRING_LITERAL(TMP2256, "author", 6);
STRING_LITERAL(TMP2257, "authors", 7);
STRING_LITERAL(TMP2258, "version", 7);
STRING_LITERAL(TMP2259, "<tr>$1</tr>\012", 12);
STRING_LITERAL(TMP2260, "$1", 2);
STRING_LITERAL(TMP2261, "<th class=\"docinfo-name\">$1:</th>", 33);
STRING_LITERAL(TMP2262, "\\item[$1:]", 10);
STRING_LITERAL(TMP2263, "<td>$1</td>", 11);
STRING_LITERAL(TMP2264, " $1\012", 4);
STRING_LITERAL(TMP2265, "<table frame=\"void\">$1</table>", 30);
STRING_LITERAL(TMP2266, "\\begin{description}\012$1\\end{description}\012", 40);
STRING_LITERAL(TMP2267, "<th align=\"left\">$1</th>", 24);
STRING_LITERAL(TMP2268, "\\item[$1]", 9);
STRING_LITERAL(TMP2269, "<td align=\"left\">$1</td>\012", 25);
STRING_LITERAL(TMP2271, "false renderRstToOut", 20);
STRING_LITERAL(TMP2272, "<pre>$1</pre>\012", 14);
STRING_LITERAL(TMP2273, "\\begin{rstpre}\012$1\012\\end{rstpre}\012", 31);
STRING_LITERAL(TMP2274, "<p>$1</p>", 9);
STRING_LITERAL(TMP2275, "$1<br />", 8);
STRING_LITERAL(TMP2276, "$1\\\\\012", 5);
STRING_LITERAL(TMP2277, "<blockquote><p>$1</p></blockquote>\012", 35);
STRING_LITERAL(TMP2278, "\\begin{quote}$1\\end{quote}\012", 27);
STRING_LITERAL(TMP2279, "<table border=\"1\" class=\"docutils\">$1</table>", 45);
STRING_LITERAL(TMP2280, "\\begin{table}\\begin{rsttab}{", 28);
STRING_LITERAL(TMP2281, "|X", 2);
STRING_LITERAL(TMP2282, "|}\012\\hline\012$1\\end{rsttab}\\end{table}", 35);
STRING_LITERAL(TMP2283, " & ", 3);
STRING_LITERAL(TMP2284, "\\\\\012\\hline\012", 10);
STRING_LITERAL(TMP2285, "<tr>", 4);
STRING_LITERAL(TMP2286, "</tr>\012", 6);
STRING_LITERAL(TMP2287, "<th>$1</th>", 11);
STRING_LITERAL(TMP2288, "\\textbf{$1}", 11);
STRING_LITERAL(TMP2289, "<a class=\"reference external\" href=\"#$2\">$1</a>", 47);
STRING_LITERAL(TMP2290, "$1\\ref{$2}", 10);
STRING_LITERAL(TMP2291, "<a class=\"reference external\" href=\"$1\">$1</a>", 46);
STRING_LITERAL(TMP2292, "\\href{$1}{$1}", 13);
STRING_LITERAL(TMP2293, "<a class=\"reference external\" href=\"$2\">$1</a>", 46);
STRING_LITERAL(TMP2294, "\\href{$2}{$1}", 13);
STRING_LITERAL(TMP2296, "scale", 5);
static NIM_CONST TY213407 TMP2297 = {
0x00, 0x3E, 0x00, 0x00, 0x21, 0xC0, 0xFF, 0x07,
0xFE, 0xFF, 0xFF, 0x97, 0xFE, 0xFF, 0xFF, 0x07,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}
;
STRING_LITERAL(TMP2298, " scale=\"$1\"", 11);
STRING_LITERAL(TMP2299, " scale=$1", 9);
STRING_LITERAL(TMP2300, "height", 6);
STRING_LITERAL(TMP2301, " height=\"$1\"", 12);
STRING_LITERAL(TMP2302, " height=$1", 10);
STRING_LITERAL(TMP2303, "width", 5);
STRING_LITERAL(TMP2304, " width=\"$1\"", 11);
STRING_LITERAL(TMP2305, " width=$1", 9);
STRING_LITERAL(TMP2306, "alt", 3);
STRING_LITERAL(TMP2307, " alt=\"$1\"", 9);
STRING_LITERAL(TMP2308, "align", 5);
STRING_LITERAL(TMP2309, " align=\"$1\"", 11);
STRING_LITERAL(TMP2310, "[$1]", 4);
STRING_LITERAL(TMP2311, "<img src=\"$1\"$2 />", 18);
STRING_LITERAL(TMP2312, "\\includegraphics$2{$1}", 22);
STRING_LITERAL(TMP2313, "number-lines", 12);
STRING_LITERAL(TMP2314, "file", 4);
STRING_LITERAL(TMP2315, "default-language", 16);
STRING_LITERAL(TMP2324, "doc.listing_start", 17);
STRING_LITERAL(TMP2325, "doc.listing_end", 15);
STRING_LITERAL(TMP2326, "<table class=\"line-nums-table\"><tbody><tr><td class=\"blob-line-"
"nums\"><pre class=\"line-nums\">", 92);
STRING_LITERAL(TMP2327, "</pre></td><td>", 15);
STRING_LITERAL(TMP2328, "</td></tr></tbody></table>", 26);
STRING_LITERAL(TMP2329, "doc.listing_button", 18);
STRING_LITERAL(TMP2330, "\\begin{rstpre}\012", 15);
STRING_LITERAL(TMP2492, "<span class=\"$2\">$1</span>", 26);
STRING_LITERAL(TMP2493, "\\span$2{$1}", 11);
extern NIM_CONST TY341090 tokenclasstostr_341087;
STRING_LITERAL(TMP2527, "\012\\end{rstpre}\012", 14);
STRING_LITERAL(TMP2528, "<div>$1</div>", 13);
STRING_LITERAL(TMP2529, "<div class=\"$1\">$2</div>", 24);
STRING_LITERAL(TMP2530, "$2", 2);
STRING_LITERAL(TMP2531, "|$1|", 4);
STRING_LITERAL(TMP2532, "<sub>$1</sub>", 13);
STRING_LITERAL(TMP2533, "\\rstsub{$1}", 11);
STRING_LITERAL(TMP2534, "<sup>$1</sup>", 13);
STRING_LITERAL(TMP2535, "\\rstsup{$1}", 11);
STRING_LITERAL(TMP2536, "<em>$1</em>", 11);
STRING_LITERAL(TMP2537, "\\emph{$1}", 9);
STRING_LITERAL(TMP2538, "<strong>$1</strong>", 19);
STRING_LITERAL(TMP2539, "<strong><em>$1</em></strong>", 28);
STRING_LITERAL(TMP2540, "\\textbf{emph{$1}}", 17);
STRING_LITERAL(TMP2541, "<cite>$1</cite>", 15);
STRING_LITERAL(TMP2544, "<span id=\"$1\">$2</span>", 23);
STRING_LITERAL(TMP2545, "$2\\label{$1}", 12);
STRING_LITERAL(TMP2546, "<tt class=\"docutils literal\"><span class=\"pre\">$1</span></tt>", 61);
STRING_LITERAL(TMP2547, "\\texttt{$1}", 11);
STRING_LITERAL(TMP2548, "<img src=\"$1\" width=\"15\"\012        height=\"17\" hspace=\"2\" vspace="
"\"2\" class=\"smiley\" />", 84);
STRING_LITERAL(TMP2549, "\\includegraphics{$1}", 20);
STRING_LITERAL(TMP2550, "doc.smiley_format", 17);
STRING_LITERAL(TMP5022, ".nim", 4);
STRING_LITERAL(TMP5023, "Module ", 7);
STRING_LITERAL(TMP5024, "split.item.toc", 14);
STRING_LITERAL(TMP5103, "<li><a class=\"reference\" id=\"$1_toc\" href=\"#$1\">$2</a></li>\012", 60);
STRING_LITERAL(TMP5104, "\\item\\label{$1_toc} $2\\ref{$1}\012", 31);
STRING_LITERAL(TMP5105, "<ul class=\"simple\">$1</ul>", 26);
STRING_LITERAL(TMP5106, "\\begin{enumerate}$1\\end{enumerate}", 34);
STRING_LITERAL(TMP5177, ".", 1);
STRING_LITERAL(TMP5178, "..", 2);
STRING_LITERAL(TMP5179, ".idx", 4);
STRING_LITERAL(TMP5180, "doc_toc_", 8);
STRING_LITERAL(TMP5184, "Documents: ", 11);
STRING_LITERAL(TMP5188, "<a href=\"", 9);
STRING_LITERAL(TMP5189, "\">", 2);
STRING_LITERAL(TMP5190, "</a>", 4);
STRING_LITERAL(TMP5191, ", ", 2);
STRING_LITERAL(TMP5192, ".<br>", 5);
STRING_LITERAL(TMP5193, "<p />", 5);
STRING_LITERAL(TMP5194, "Modules: ", 9);
STRING_LITERAL(TMP5195, ".html\">", 7);
STRING_LITERAL(TMP5196, "<h2>Documentation files</h2>\012", 29);
STRING_LITERAL(TMP5200, "<ul>\012", 5);
STRING_LITERAL(TMP5201, "<ul>", 4);
STRING_LITERAL(TMP5202, "</ul>", 5);
STRING_LITERAL(TMP5203, "<li><a href=\"", 13);
STRING_LITERAL(TMP5204, "</a>\012", 5);
STRING_LITERAL(TMP5205, "</ul>\012", 6);
STRING_LITERAL(TMP5206, "<ul><li><a href=\"", 17);
STRING_LITERAL(TMP5207, "<h2>API symbols</h2>\012", 21);
STRING_LITERAL(TMP5208, "<dt><a name=\"$2\" href=\"#$2\"><span>$1:</span></a></dt><ul class="
"\"simple\"><dd>\012", 77);
STRING_LITERAL(TMP5209, "<li><a class=\"reference external\"\012          title=\"$3\" href=\"$1"
"\">$2</a></li>\012          ", 87);
STRING_LITERAL(TMP5210, "<li><a class=\"reference external\" href=\"$1\">$2</a></li>\012       "
"   ", 66);
STRING_LITERAL(TMP5211, "</ul></dd>\012", 11);
NimStringDesc* splitter_347489;
extern Gcheap51018 gch_51059;
extern TNimType NTI341023; /* GeneralTokenizer */
extern TNimType NTI4011; /* RootObj */
TNimType NTI347016; /* RstGenerator */
TNimType NTI347010; /* OutputTarget */
extern TNimType NTI145214; /* StringTableRef */
extern TNimType NTI108; /* int */
TNimType NTI347012; /* TocEntry */
extern TNimType NTI332007; /* PRstNode */
extern TNimType NTI149; /* string */
TNimType NTI347035; /* seq[TocEntry] */
extern TNimType NTI138; /* bool */
extern TNimType NTI333015; /* RstParseOptions */
extern TNimType NTI333023; /* FindFileHandler */
extern TNimType NTI333021; /* MsgHandler */
TNimType NTI347045; /* array[MetaEnum, string] */
extern TNimType NTI347053; /* Table */
extern TNimType NTI130408; /* seq[string] */
TNimType NTI348397; /* IndexEntry */
TNimType NTI351507; /* seq[IndexEntry] */
extern TNimType NTI348413; /* KeyValuePairSeq */
TNimType NTI349075; /* tuple[level: int, text: string] */
TNimType NTI349074; /* seq[tuple[level: int, text: string]] */

static N_INLINE(Cell48947*, usrtocell_52646)(void* usr) {
	Cell48947* result;
	result = 0;
	result = ((Cell48947*) ((NI)((NU64)(((NI) (usr))) - (NU64)(((NI)sizeof(Cell48947))))));
	return result;
}

static N_INLINE(void, rtladdzct_54204)(Cell48947* c) {
	addzct_52617((&gch_51059.zct), c);
}

static N_INLINE(void, nimGCunrefNoCycle)(void* p) {
	Cell48947* c;
	c = usrtocell_52646(p);
	{
		(*c).refcount -= ((NI) 8);
		if (!((NU64)((*c).refcount) < (NU64)(((NI) 8)))) goto LA3;
		rtladdzct_54204(c);
	}
	LA3: ;
}

N_NIMCALL(void, renderaux_347734)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result) {
	{
		NI i_347752;
		NI HEX3Atmp_347754;
		NI LOC2;
		NI res_347757;
		i_347752 = 0;
		HEX3Atmp_347754 = 0;
		LOC2 = 0;
		LOC2 = len_332090(n);
		HEX3Atmp_347754 = (NI)(LOC2 - ((NI) 1));
		res_347757 = ((NI) 0);
		{
			while (1) {
				if (!(res_347757 <= HEX3Atmp_347754)) goto LA4;
				i_347752 = res_347757;
				renderrsttoout_347724(d, (*n).sons->data[i_347752], result);
				res_347757 += ((NI) 1);
			} LA4: ;
		}
	}
}

static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src) {
	memcpy(((NCSTRING) ((&(*dest).data[((*dest).Sup.len)- 0]))), ((NCSTRING) ((*src).data)), (NI)((*src).Sup.len + ((NI) 1)));
	(*dest).Sup.len += (*src).Sup.len;
}

static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src) {
	{
		Cell48947* c;
		if (!!((src == NIM_NIL))) goto LA3;
		c = usrtocell_52646(src);
		(*c).refcount += ((NI) 8);
	}
	LA3: ;
	{
		Cell48947* c;
		if (!!(((*dest) == NIM_NIL))) goto LA7;
		c = usrtocell_52646((*dest));
		{
			(*c).refcount -= ((NI) 8);
			if (!((NU64)((*c).refcount) < (NU64)(((NI) 8)))) goto LA11;
			rtladdzct_54204(c);
		}
		LA11: ;
	}
	LA7: ;
	(*dest) = src;
}

N_NIMCALL(void, dispa_347689)(NU8 target, NimStringDesc** dest, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argsLen0) {
	{
		if (!!((target == ((NU8) 1)))) goto LA3;
		nsuAddf(dest, xml, args, argsLen0);
	}
	goto LA1;
	LA3: ;
	{
		nsuAddf(dest, tex, args, argsLen0);
	}
	LA1: ;
}

static N_INLINE(void, appendChar)(NimStringDesc* dest, NIM_CHAR c) {
	(*dest).data[((*dest).Sup.len)- 0] = c;
	(*dest).data[((NI)((*dest).Sup.len + ((NI) 1)))- 0] = 0;
	(*dest).Sup.len += ((NI) 1);
}

N_NIMCALL(NimStringDesc*, quoteindexcolumn_347835)(NimStringDesc* text) {
	NimStringDesc* result;
	NimStringDesc* LOC1;
	NimStringDesc* LOC2;
	result = 0;
	LOC1 = 0;
	LOC1 = nsuReplaceStr(text, ((NimStringDesc*) &TMP2211), ((NimStringDesc*) &TMP2212));
	LOC2 = 0;
	LOC2 = nsuReplaceStr(LOC1, ((NimStringDesc*) &TMP2213), ((NimStringDesc*) &TMP2214));
	result = nsuReplaceStr(LOC2, ((NimStringDesc*) &TMP2215), ((NimStringDesc*) &TMP2216));
	return result;
}

N_NIMCALL(void, setindexterm_347855)(Rstgenerator347016* d, NimStringDesc* id, NimStringDesc* term, NimStringDesc* linktitle, NimStringDesc* linkdesc) {
	NimStringDesc* entry;
	NIM_BOOL istitle;
	NimStringDesc* htmlfile;
	NimStringDesc* LOC1;
	entry = copyString(term);
	istitle = NIM_FALSE;
	entry = addChar(entry, 9);
	LOC1 = 0;
	LOC1 = nosextractFilename((*d).filename);
	htmlfile = noschangeFileExt(LOC1, ((NimStringDesc*) &TMP2210));
	entry = resizeString(entry, htmlfile->Sup.len + 0);
appendString(entry, htmlfile);
	{
		if (!(((NI) 0) < (id ? id->Sup.len : 0))) goto LA4;
		entry = addChar(entry, 35);
		entry = resizeString(entry, id->Sup.len + 0);
appendString(entry, id);
	}
	goto LA2;
	LA4: ;
	{
		istitle = NIM_TRUE;
	}
	LA2: ;
	{
		NIM_BOOL LOC9;
		NimStringDesc* LOC13;
		NimStringDesc* LOC14;
		NimStringDesc* LOC15;
		NimStringDesc* LOC16;
		LOC9 = 0;
		LOC9 = (((NI) 0) < (linktitle ? linktitle->Sup.len : 0));
		if (LOC9) goto LA10;
		LOC9 = (((NI) 0) < (linkdesc ? linkdesc->Sup.len : 0));
		LA10: ;
		if (!LOC9) goto LA11;
		LOC13 = 0;
		LOC14 = 0;
		LOC14 = quoteindexcolumn_347835(linktitle);
		LOC13 = rawNewString(LOC14->Sup.len + 1);
appendChar(LOC13, 9);
appendString(LOC13, LOC14);
		entry = resizeString(entry, LOC13->Sup.len + 0);
appendString(entry, LOC13);
		LOC15 = 0;
		LOC16 = 0;
		LOC16 = quoteindexcolumn_347835(linkdesc);
		LOC15 = rawNewString(LOC16->Sup.len + 1);
appendChar(LOC15, 9);
appendString(LOC15, LOC16);
		entry = resizeString(entry, LOC15->Sup.len + 0);
appendString(entry, LOC15);
	}
	LA11: ;
	entry = resizeString(entry, 1);
appendString(entry, ((NimStringDesc*) &TMP2213));
	{
		if (!istitle) goto LA19;
		insert_92001((&(*d).theindex), entry, ((NI) 0));
	}
	goto LA17;
	LA19: ;
	{
		(*d).theindex = resizeString((*d).theindex, entry->Sup.len + 0);
appendString((*d).theindex, entry);
	}
	LA17: ;
}

N_NIMCALL(NimStringDesc*, striptochtml_353841)(NimStringDesc* s) {
	NimStringDesc* result;
	NI first;
{	result = 0;
	result = copyString(s);
	first = nsuFindChar(result, 60, ((NI) 0));
	{
		while (1) {
			NI last;
			if (!(((NI) 0) <= first)) goto LA2;
			last = nsuFindChar(result, 62, ((NI) (first)));
			{
				if (!(last < ((NI) 0))) goto LA5;
				goto BeforeRet;
			}
			LA5: ;
			nsuDelete((&result), first, last);
			first = nsuFindChar(result, 60, ((NI) (first)));
		} LA2: ;
	}
	}BeforeRet: ;
	return result;
}

N_NIMCALL(void, renderheadline_353861)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result) {
	NimStringDesc* tmp;
	NimStringDesc* sectionprefix;
	NimStringDesc* refname;
	NimStringDesc* LOC14;
	NimStringDesc* LOC15;
	NimStringDesc* LOC25;
	NimStringDesc* LOC26;
	NimStringDesc* LOC27;
	tmp = copyString(((NimStringDesc*) &TMP2204));
	{
		NI i_353880;
		NI HEX3Atmp_354006;
		NI LOC2;
		NI res_354009;
		i_353880 = 0;
		HEX3Atmp_354006 = 0;
		LOC2 = 0;
		LOC2 = len_332090(n);
		HEX3Atmp_354006 = (NI)(LOC2 - ((NI) 1));
		res_354009 = ((NI) 0);
		{
			while (1) {
				if (!(res_354009 <= HEX3Atmp_354006)) goto LA4;
				i_353880 = res_354009;
				renderrsttoout_347724(d, (*n).sons->data[i_353880], (&tmp));
				res_354009 += ((NI) 1);
			} LA4: ;
		}
	}
	unsureAsgnRef((void**) (&(*d).currentsection), copyString(tmp));
	sectionprefix = copyString(((NimStringDesc*) &TMP2204));
	{
		NI i_353894;
		NI HEX3Atmp_354014;
		NI res_354017;
		i_353894 = 0;
		HEX3Atmp_354014 = 0;
		HEX3Atmp_354014 = ((*d).tocpart ? ((*d).tocpart->Sup.len-1) : -1);
		res_354017 = HEX3Atmp_354014;
		{
			while (1) {
				Rstnode332011* n2;
				if (!(((NI) 0) <= res_354017)) goto LA7;
				i_353894 = res_354017;
				n2 = (*d).tocpart->data[i_353894].n;
				{
					NimStringDesc* LOC12;
					NimStringDesc* LOC13;
					if (!((*n2).level < (*n).level)) goto LA10;
					LOC12 = 0;
					LOC13 = 0;
					LOC13 = rstnodetorefname_333067(n2);
					LOC12 = rawNewString(LOC13->Sup.len + 1);
appendString(LOC12, LOC13);
appendString(LOC12, ((NimStringDesc*) &TMP2206));
					sectionprefix = LOC12;
					goto LA5;
				}
				LA10: ;
				res_354017 -= ((NI) 1);
			} LA7: ;
		}
	} LA5: ;
	LOC14 = 0;
	LOC15 = 0;
	LOC15 = rstnodetorefname_333067(n);
	LOC14 = rawNewString(sectionprefix->Sup.len + LOC15->Sup.len + 0);
appendString(LOC14, sectionprefix);
appendString(LOC14, LOC15);
	refname = LOC14;
	{
		NI length;
		NimStringDesc* LOC20;
		NimStringDesc* LOC21;
		TY194829 LOC22;
		if (!(*d).hastoc) goto LA18;
		length = ((*d).tocpart ? (*d).tocpart->Sup.len : 0);
		(*d).tocpart = (TY347035*) setLengthSeq(&((*d).tocpart)->Sup, sizeof(Tocentry347012), ((NI) ((NI)(length + ((NI) 1)))));
		LOC20 = 0;
		LOC20 = (*d).tocpart->data[length].refname; (*d).tocpart->data[length].refname = copyStringRC1(refname);
		if (LOC20) nimGCunrefNoCycle(LOC20);
		asgnRefNoCycle((void**) (&(*d).tocpart->data[length].n), n);
		LOC21 = 0;
		LOC21 = (*d).tocpart->data[length].header; (*d).tocpart->data[length].header = copyStringRC1(tmp);
		if (LOC21) nimGCunrefNoCycle(LOC21);
		memset((void*)LOC22, 0, sizeof(LOC22));
		LOC22[0] = nimIntToStr((*n).level);
		LOC22[1] = copyString((*d).tocpart->data[length].refname);
		LOC22[2] = copyString(tmp);
		LOC22[3] = nimCharToStr(((NIM_CHAR) (((NI) ((NI)((NI)((*n).level - ((NI) 1)) + ((NI) 65)))))));
		dispa_347689((*d).target, result, ((NimStringDesc*) &TMP2207), ((NimStringDesc*) &TMP2208), LOC22, 4);
	}
	goto LA16;
	LA18: ;
	{
		TY194829 LOC24;
		memset((void*)LOC24, 0, sizeof(LOC24));
		LOC24[0] = nimIntToStr((*n).level);
		LOC24[1] = copyString(refname);
		LOC24[2] = copyString(tmp);
		LOC24[3] = nimCharToStr(((NIM_CHAR) (((NI) ((NI)((NI)((*n).level - ((NI) 1)) + ((NI) 65)))))));
		dispa_347689((*d).target, result, ((NimStringDesc*) &TMP2209), ((NimStringDesc*) &TMP2208), LOC24, 4);
	}
	LA16: ;
	LOC25 = 0;
	LOC25 = striptochtml_353841(tmp);
	LOC26 = 0;
	LOC27 = 0;
	LOC27 = nsuRepeatChar(32, ((NI) (((((NI) 0) >= (*n).level) ? ((NI) 0) : (*n).level))));
	LOC26 = rawNewString(LOC27->Sup.len + tmp->Sup.len + 0);
appendString(LOC26, LOC27);
appendString(LOC26, tmp);
	setindexterm_347855(d, refname, LOC25, LOC26, ((NimStringDesc*) &TMP2204));
}

N_NIMCALL(void, renderoverline_354045)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result) {
	{
		if (!(((*d).meta[(((NU8) 1))- 0] ? (*d).meta[(((NU8) 1))- 0]->Sup.len : 0) == ((NI) 0))) goto LA3;
		{
			NI i_354063;
			NI HEX3Atmp_354106;
			NI LOC6;
			NI res_354109;
			i_354063 = 0;
			HEX3Atmp_354106 = 0;
			LOC6 = 0;
			LOC6 = len_332090(n);
			HEX3Atmp_354106 = (NI)(LOC6 - ((NI) 1));
			res_354109 = ((NI) 0);
			{
				while (1) {
					if (!(res_354109 <= HEX3Atmp_354106)) goto LA8;
					i_354063 = res_354109;
					renderrsttoout_347724(d, (*n).sons->data[i_354063], (&(*d).meta[(((NU8) 1))- 0]));
					res_354109 += ((NI) 1);
				} LA8: ;
			}
		}
		unsureAsgnRef((void**) (&(*d).currentsection), copyString((*d).meta[(((NU8) 1))- 0]));
	}
	goto LA1;
	LA3: ;
	{
		if (!(((*d).meta[(((NU8) 2))- 0] ? (*d).meta[(((NU8) 2))- 0]->Sup.len : 0) == ((NI) 0))) goto LA10;
		{
			NI i_354077;
			NI HEX3Atmp_354114;
			NI LOC13;
			NI res_354117;
			i_354077 = 0;
			HEX3Atmp_354114 = 0;
			LOC13 = 0;
			LOC13 = len_332090(n);
			HEX3Atmp_354114 = (NI)(LOC13 - ((NI) 1));
			res_354117 = ((NI) 0);
			{
				while (1) {
					if (!(res_354117 <= HEX3Atmp_354114)) goto LA15;
					i_354077 = res_354117;
					renderrsttoout_347724(d, (*n).sons->data[i_354077], (&(*d).meta[(((NU8) 2))- 0]));
					res_354117 += ((NI) 1);
				} LA15: ;
			}
		}
		unsureAsgnRef((void**) (&(*d).currentsection), copyString((*d).meta[(((NU8) 2))- 0]));
	}
	goto LA1;
	LA10: ;
	{
		NimStringDesc* tmp;
		TY194829 LOC21;
		tmp = copyString(((NimStringDesc*) &TMP2204));
		{
			NI i_354092;
			NI HEX3Atmp_354122;
			NI LOC18;
			NI res_354125;
			i_354092 = 0;
			HEX3Atmp_354122 = 0;
			LOC18 = 0;
			LOC18 = len_332090(n);
			HEX3Atmp_354122 = (NI)(LOC18 - ((NI) 1));
			res_354125 = ((NI) 0);
			{
				while (1) {
					if (!(res_354125 <= HEX3Atmp_354122)) goto LA20;
					i_354092 = res_354125;
					renderrsttoout_347724(d, (*n).sons->data[i_354092], (&tmp));
					res_354125 += ((NI) 1);
				} LA20: ;
			}
		}
		unsureAsgnRef((void**) (&(*d).currentsection), copyString(tmp));
		memset((void*)LOC21, 0, sizeof(LOC21));
		LOC21[0] = nimIntToStr((*n).level);
		LOC21[1] = rstnodetorefname_333067(n);
		LOC21[2] = copyString(tmp);
		LOC21[3] = nimCharToStr(((NIM_CHAR) (((NI) ((NI)((NI)((*n).level - ((NI) 1)) + ((NI) 65)))))));
		dispa_347689((*d).target, result, ((NimStringDesc*) &TMP2217), ((NimStringDesc*) &TMP2218), LOC21, 4);
	}
	LA1: ;
}

N_NIMCALL(void, renderaux_347776)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc* frmta, NimStringDesc* frmtb, NimStringDesc** result) {
	NimStringDesc* tmp;
	tmp = copyString(((NimStringDesc*) &TMP2204));
	{
		NI i_347797;
		NI HEX3Atmp_347813;
		NI LOC2;
		NI res_347816;
		i_347797 = 0;
		HEX3Atmp_347813 = 0;
		LOC2 = 0;
		LOC2 = len_332090(n);
		HEX3Atmp_347813 = (NI)(LOC2 - ((NI) 1));
		res_347816 = ((NI) 0);
		{
			while (1) {
				if (!(res_347816 <= HEX3Atmp_347813)) goto LA4;
				i_347797 = res_347816;
				renderrsttoout_347724(d, (*n).sons->data[i_347797], (&tmp));
				res_347816 += ((NI) 1);
			} LA4: ;
		}
	}
	{
		TY192421 LOC9;
		if (!!(((*d).target == ((NU8) 1)))) goto LA7;
		memset((void*)LOC9, 0, sizeof(LOC9));
		LOC9[0] = copyString(tmp);
		nsuAddf(result, frmta, LOC9, 1);
	}
	goto LA5;
	LA7: ;
	{
		TY192421 LOC11;
		memset((void*)LOC11, 0, sizeof(LOC11));
		LOC11[0] = copyString(tmp);
		nsuAddf(result, frmtb, LOC11, 1);
	}
	LA5: ;
}

N_NIMCALL(NI, nextsplitpoint_347506)(NimStringDesc* s, NI start) {
	NI result;
{	result = 0;
	result = start;
	{
		while (1) {
			if (!(result < (NI)((s ? s->Sup.len : 0) + ((NI) 0)))) goto LA2;
			switch (((NU8)(s->data[result]))) {
			case 95:
			{
				goto BeforeRet;
			}
			break;
			case 97 ... 122:
			{
				{
					if (!((NI)(result + ((NI) 1)) < (NI)((s ? s->Sup.len : 0) + ((NI) 0)))) goto LA7;
					{
						if (!(((NU8)(s->data[(NI)(result + ((NI) 1))])) >= ((NU8)(65)) && ((NU8)(s->data[(NI)(result + ((NI) 1))])) <= ((NU8)(90)))) goto LA11;
						goto BeforeRet;
					}
					LA11: ;
				}
				LA7: ;
			}
			break;
			default:
			{
			}
			break;
			}
			result += ((NI) 1);
		} LA2: ;
	}
	result -= ((NI) 1);
	}BeforeRet: ;
	return result;
}

static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* a, NimStringDesc* b) {
	NIM_BOOL result;
	NIM_BOOL LOC11;
	int LOC13;
{	result = 0;
	{
		if (!(a == b)) goto LA3;
		result = NIM_TRUE;
		goto BeforeRet;
	}
	LA3: ;
	{
		NIM_BOOL LOC7;
		LOC7 = 0;
		LOC7 = (a == NIM_NIL);
		if (LOC7) goto LA8;
		LOC7 = (b == NIM_NIL);
		LA8: ;
		if (!LOC7) goto LA9;
		result = NIM_FALSE;
		goto BeforeRet;
	}
	LA9: ;
	LOC11 = 0;
	LOC11 = ((*a).Sup.len == (*b).Sup.len);
	if (!(LOC11)) goto LA12;
	LOC13 = 0;
	LOC13 = memcmp(((NCSTRING) ((*a).data)), ((NCSTRING) ((*b).data)), (*a).Sup.len);
	LOC11 = (LOC13 == ((NI32) 0));
	LA12: ;
	result = LOC11;
	goto BeforeRet;
	}BeforeRet: ;
	return result;
}

N_NIMCALL(void, addxmlchar_347456)(NimStringDesc** dest, NIM_CHAR c) {
	switch (((NU8)(c))) {
	case 38:
	{
		(*dest) = resizeString((*dest), 5);
appendString((*dest), ((NimStringDesc*) &TMP2237));
	}
	break;
	case 60:
	{
		(*dest) = resizeString((*dest), 4);
appendString((*dest), ((NimStringDesc*) &TMP2238));
	}
	break;
	case 62:
	{
		(*dest) = resizeString((*dest), 4);
appendString((*dest), ((NimStringDesc*) &TMP2239));
	}
	break;
	case 34:
	{
		(*dest) = resizeString((*dest), 6);
appendString((*dest), ((NimStringDesc*) &TMP2240));
	}
	break;
	default:
	{
		(*dest) = addChar((*dest), c);
	}
	break;
	}
}

N_NIMCALL(void, addtexchar_347478)(NimStringDesc** dest, NIM_CHAR c) {
	switch (((NU8)(c))) {
	case 95:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP2241));
	}
	break;
	case 123:
	{
		(*dest) = resizeString((*dest), 12);
appendString((*dest), ((NimStringDesc*) &TMP2242));
	}
	break;
	case 125:
	{
		(*dest) = resizeString((*dest), 12);
appendString((*dest), ((NimStringDesc*) &TMP2243));
	}
	break;
	case 91:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP2244));
	}
	break;
	case 93:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP2245));
	}
	break;
	case 92:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP2246));
	}
	break;
	case 36:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP2247));
	}
	break;
	case 38:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP2248));
	}
	break;
	case 35:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP2249));
	}
	break;
	case 37:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP2250));
	}
	break;
	case 126:
	{
		(*dest) = resizeString((*dest), 12);
appendString((*dest), ((NimStringDesc*) &TMP2251));
	}
	break;
	case 64:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP2252));
	}
	break;
	case 94:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP2253));
	}
	break;
	case 96:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP2254));
	}
	break;
	default:
	{
		(*dest) = addChar((*dest), c);
	}
	break;
	}
}

static N_INLINE(void, escchar_347494)(NU8 target, NimStringDesc** dest, NIM_CHAR c) {
	switch (target) {
	case ((NU8) 0):
	{
		addxmlchar_347456(dest, c);
	}
	break;
	case ((NU8) 1):
	{
		addtexchar_347478(dest, c);
	}
	break;
	}
}

N_NIMCALL(NimStringDesc*, esc_347553)(NU8 target, NimStringDesc* s, NI splitafter) {
	NimStringDesc* result;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP2204));
	{
		NI partlen;
		NI j;
		if (!(((NI) 0) <= splitafter)) goto LA3;
		partlen = ((NI) 0);
		j = ((NI) 0);
		{
			while (1) {
				NI k;
				if (!(j < (s ? s->Sup.len : 0))) goto LA6;
				k = nextsplitpoint_347506(s, j);
				{
					NIM_BOOL LOC9;
					LOC9 = 0;
					LOC9 = !(eqStrings(splitter_347489, ((NimStringDesc*) &TMP2236)));
					if (LOC9) goto LA10;
					LOC9 = (splitafter < (NI)((NI)((NI)(partlen + k) - j) + ((NI) 1)));
					LA10: ;
					if (!LOC9) goto LA11;
					partlen = ((NI) 0);
					result = resizeString(result, splitter_347489->Sup.len + 0);
appendString(result, splitter_347489);
				}
				LA11: ;
				{
					NI i_347574;
					NI res_347603;
					i_347574 = 0;
					res_347603 = j;
					{
						while (1) {
							if (!(res_347603 <= k)) goto LA15;
							i_347574 = res_347603;
							escchar_347494(target, (&result), s->data[i_347574]);
							res_347603 += ((NI) 1);
						} LA15: ;
					}
				}
				partlen += (NI)((NI)(k - j) + ((NI) 1));
				j = (NI)(k + ((NI) 1));
			} LA6: ;
		}
	}
	goto LA1;
	LA3: ;
	{
		{
			NI i_347597;
			NI HEX3Atmp_347608;
			NI res_347611;
			i_347597 = 0;
			HEX3Atmp_347608 = 0;
			HEX3Atmp_347608 = (NI)((s ? s->Sup.len : 0) - ((NI) 1));
			res_347611 = ((NI) 0);
			{
				while (1) {
					if (!(res_347611 <= HEX3Atmp_347608)) goto LA19;
					i_347597 = res_347611;
					escchar_347494(target, (&result), s->data[i_347597]);
					res_347611 += ((NI) 1);
				} LA19: ;
			}
		}
	}
	LA1: ;
	return result;
}

N_NIMCALL(void, renderfield_355717)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result) {
	NIM_BOOL b;
	b = NIM_FALSE;
	{
		NimStringDesc* fieldname;
		NimStringDesc* fieldval;
		NimStringDesc* LOC5;
		NimStringDesc* LOC6;
		if (!((*d).target == ((NU8) 1))) goto LA3;
		fieldname = addnodes_333073((*n).sons->data[((NI) 0)]);
		LOC5 = 0;
		LOC5 = addnodes_333073((*n).sons->data[((NI) 1)]);
		LOC6 = 0;
		LOC6 = nsuStrip(LOC5, NIM_TRUE, NIM_TRUE, TMP2255);
		fieldval = esc_347553((*d).target, LOC6, ((NI) -1));
		{
			NIM_BOOL LOC9;
			NI LOC10;
			NI LOC12;
			LOC9 = 0;
			LOC10 = 0;
			LOC10 = nsuCmpIgnoreStyle(fieldname, ((NimStringDesc*) &TMP2256));
			LOC9 = (LOC10 == ((NI) 0));
			if (LOC9) goto LA11;
			LOC12 = 0;
			LOC12 = nsuCmpIgnoreStyle(fieldname, ((NimStringDesc*) &TMP2257));
			LOC9 = (LOC12 == ((NI) 0));
			LA11: ;
			if (!LOC9) goto LA13;
			{
				if (!(((*d).meta[(((NU8) 3))- 0] ? (*d).meta[(((NU8) 3))- 0]->Sup.len : 0) == ((NI) 0))) goto LA17;
				unsureAsgnRef((void**) (&(*d).meta[(((NU8) 3))- 0]), copyString(fieldval));
				b = NIM_TRUE;
			}
			LA17: ;
		}
		goto LA7;
		LA13: ;
		{
			NI LOC20;
			LOC20 = 0;
			LOC20 = nsuCmpIgnoreStyle(fieldname, ((NimStringDesc*) &TMP2258));
			if (!(LOC20 == ((NI) 0))) goto LA21;
			{
				if (!(((*d).meta[(((NU8) 4))- 0] ? (*d).meta[(((NU8) 4))- 0]->Sup.len : 0) == ((NI) 0))) goto LA25;
				unsureAsgnRef((void**) (&(*d).meta[(((NU8) 4))- 0]), copyString(fieldval));
				b = NIM_TRUE;
			}
			LA25: ;
		}
		goto LA7;
		LA21: ;
		LA7: ;
	}
	LA3: ;
	{
		if (!!(b)) goto LA29;
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2259), ((NimStringDesc*) &TMP2260), result);
	}
	LA29: ;
}

N_NIMCALL(NimStringDesc*, texcolumns_355677)(Rstnode332011* n) {
	NimStringDesc* result;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP2204));
	{
		NI i_355693;
		NI HEX3Atmp_355695;
		NI res_355698;
		i_355693 = 0;
		HEX3Atmp_355695 = 0;
		HEX3Atmp_355695 = len_332090(n);
		res_355698 = ((NI) 1);
		{
			while (1) {
				if (!(res_355698 <= HEX3Atmp_355695)) goto LA3;
				i_355693 = res_355698;
				result = resizeString(result, 2);
appendString(result, ((NimStringDesc*) &TMP2281));
				res_355698 += ((NI) 1);
			} LA3: ;
		}
	}
	return result;
}

N_NIMCALL(NimStringDesc*, dispf_347666)(NU8 target, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argsLen0) {
	NimStringDesc* result;
	result = 0;
	{
		if (!!((target == ((NU8) 1)))) goto LA3;
		result = nsuFormatOpenArray(xml, args, argsLen0);
	}
	goto LA1;
	LA3: ;
	{
		result = nsuFormatOpenArray(tex, args, argsLen0);
	}
	LA1: ;
	return result;
}

N_NIMCALL(void, renderimage_354213)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result) {
	NimStringDesc* options;
	NimStringDesc* s;
	NimStringDesc* arg;
	options = copyString(((NimStringDesc*) &TMP2204));
	s = getfieldvalue_333079(n, ((NimStringDesc*) &TMP2296));
	{
		NIM_BOOL LOC3;
		TY192421 LOC7;
		LOC3 = 0;
		LOC3 = (((NI) 0) < (s ? s->Sup.len : 0));
		if (!(LOC3)) goto LA4;
		LOC3 = allcharsinset_103130(s, TMP2297);
		LA4: ;
		if (!LOC3) goto LA5;
		memset((void*)LOC7, 0, sizeof(LOC7));
		LOC7[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE, TMP2255);
		dispa_347689((*d).target, (&options), ((NimStringDesc*) &TMP2298), ((NimStringDesc*) &TMP2299), LOC7, 1);
	}
	LA5: ;
	s = getfieldvalue_333079(n, ((NimStringDesc*) &TMP2300));
	{
		NIM_BOOL LOC10;
		TY192421 LOC14;
		LOC10 = 0;
		LOC10 = (((NI) 0) < (s ? s->Sup.len : 0));
		if (!(LOC10)) goto LA11;
		LOC10 = allcharsinset_103130(s, TMP2297);
		LA11: ;
		if (!LOC10) goto LA12;
		memset((void*)LOC14, 0, sizeof(LOC14));
		LOC14[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE, TMP2255);
		dispa_347689((*d).target, (&options), ((NimStringDesc*) &TMP2301), ((NimStringDesc*) &TMP2302), LOC14, 1);
	}
	LA12: ;
	s = getfieldvalue_333079(n, ((NimStringDesc*) &TMP2303));
	{
		NIM_BOOL LOC17;
		TY192421 LOC21;
		LOC17 = 0;
		LOC17 = (((NI) 0) < (s ? s->Sup.len : 0));
		if (!(LOC17)) goto LA18;
		LOC17 = allcharsinset_103130(s, TMP2297);
		LA18: ;
		if (!LOC17) goto LA19;
		memset((void*)LOC21, 0, sizeof(LOC21));
		LOC21[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE, TMP2255);
		dispa_347689((*d).target, (&options), ((NimStringDesc*) &TMP2304), ((NimStringDesc*) &TMP2305), LOC21, 1);
	}
	LA19: ;
	s = getfieldvalue_333079(n, ((NimStringDesc*) &TMP2306));
	{
		NIM_BOOL LOC24;
		TY192421 LOC28;
		LOC24 = 0;
		LOC24 = (((NI) 0) < (s ? s->Sup.len : 0));
		if (!(LOC24)) goto LA25;
		LOC24 = allcharsinset_103130(s, TMP2297);
		LA25: ;
		if (!LOC24) goto LA26;
		memset((void*)LOC28, 0, sizeof(LOC28));
		LOC28[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE, TMP2255);
		dispa_347689((*d).target, (&options), ((NimStringDesc*) &TMP2307), ((NimStringDesc*) &TMP2204), LOC28, 1);
	}
	LA26: ;
	s = getfieldvalue_333079(n, ((NimStringDesc*) &TMP2308));
	{
		NIM_BOOL LOC31;
		TY192421 LOC35;
		LOC31 = 0;
		LOC31 = (((NI) 0) < (s ? s->Sup.len : 0));
		if (!(LOC31)) goto LA32;
		LOC31 = allcharsinset_103130(s, TMP2297);
		LA32: ;
		if (!LOC31) goto LA33;
		memset((void*)LOC35, 0, sizeof(LOC35));
		LOC35[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE, TMP2255);
		dispa_347689((*d).target, (&options), ((NimStringDesc*) &TMP2309), ((NimStringDesc*) &TMP2204), LOC35, 1);
	}
	LA33: ;
	{
		TY192421 LOC40;
		if (!(((NI) 0) < (options ? options->Sup.len : 0))) goto LA38;
		memset((void*)LOC40, 0, sizeof(LOC40));
		LOC40[0] = copyString(options);
		options = dispf_347666((*d).target, ((NimStringDesc*) &TMP2260), ((NimStringDesc*) &TMP2310), LOC40, 1);
	}
	LA38: ;
	arg = getargument_333086(n);
	{
		NIM_BOOL LOC43;
		TY193306 LOC47;
		LOC43 = 0;
		LOC43 = (((NI) 0) < (arg ? arg->Sup.len : 0));
		if (!(LOC43)) goto LA44;
		LOC43 = allcharsinset_103130(arg, TMP2297);
		LA44: ;
		if (!LOC43) goto LA45;
		memset((void*)LOC47, 0, sizeof(LOC47));
		LOC47[0] = copyString(arg);
		LOC47[1] = copyString(options);
		dispa_347689((*d).target, result, ((NimStringDesc*) &TMP2311), ((NimStringDesc*) &TMP2312), LOC47, 2);
	}
	LA45: ;
	{
		NI LOC50;
		LOC50 = 0;
		LOC50 = len_332090(n);
		if (!(((NI) 3) <= LOC50)) goto LA51;
		renderrsttoout_347724(d, (*n).sons->data[((NI) 2)], result);
	}
	LA51: ;
}

N_NIMCALL(void, init_347086)(Codeblockparams347020* p) {
	(*p).startline = ((NI) 1);
	(*p).lang = ((NU8) 0);
	unsureAsgnRef((void**) (&(*p).langstr), copyString(((NimStringDesc*) &TMP2204)));
}

N_NIMCALL(void, parsecodeblockfield_354493)(Rstgenerator347016* d, Rstnode332011* n, Codeblockparams347020* params) {
	NimStringDesc* LOC1;
	NimStringDesc* LOC2;
	LOC1 = 0;
	LOC1 = getargument_333086(n);
	LOC2 = 0;
	LOC2 = nsuToLowerStr(LOC1);
	if (eqStrings(LOC2, ((NimStringDesc*) &TMP2313))) goto LA3;
	if (eqStrings(LOC2, ((NimStringDesc*) &TMP2314))) goto LA4;
	if (eqStrings(LOC2, ((NimStringDesc*) &TMP2315))) goto LA5;
	goto LA6;
	LA3: ;
	{
		NI number;
		(*params).numberlines = NIM_TRUE;
		number = 0;
		{
			NimStringDesc* LOC11;
			NI LOC12;
			LOC11 = 0;
			LOC11 = getfieldvalue_336314(n);
			LOC12 = 0;
			LOC12 = npuParseInt(LOC11, (&number), ((NI) 0));
			if (!(((NI) 0) < LOC12)) goto LA13;
			(*params).startline = number;
		}
		LA13: ;
	}
	goto LA7;
	LA4: ;
	{
	}
	goto LA7;
	LA5: ;
	{
		NimStringDesc* LOC17;
		LOC17 = 0;
		LOC17 = getfieldvalue_336314(n);
		unsureAsgnRef((void**) (&(*params).langstr), nsuStrip(LOC17, NIM_TRUE, NIM_TRUE, TMP2255));
		(*params).lang = getsourcelanguage_341099((*params).langstr);
	}
	goto LA7;
	LA6: ;
	{
		NimStringDesc* LOC19;
		LOC19 = 0;
		LOC19 = getargument_333086(n);
		(*d).msghandler((*d).filename, ((NI) 1), ((NI) 0), ((NU8) 9), LOC19);
	}
	LA7: ;
}

N_NIMCALL(void, parsecodeblockparams_354508)(Rstgenerator347016* d, Rstnode332011* n, Codeblockparams347020* Result) {
	NimStringDesc* LOC12;
{	init_347086(Result);
	{
		if (!n == 0) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	{
		if (!!((*n).sons->data[((NI) 1)] == 0)) goto LA7;
		{
			Rstnode332011* son_355011;
			Rstnodeseq332009* HEX3Atmp_355014;
			NI i_355017;
			NI L_355019;
			son_355011 = 0;
			HEX3Atmp_355014 = 0;
			HEX3Atmp_355014 = (*(*n).sons->data[((NI) 1)]).sons;
			i_355017 = ((NI) 0);
			L_355019 = (HEX3Atmp_355014 ? HEX3Atmp_355014->Sup.len : 0);
			{
				while (1) {
					if (!(i_355017 < L_355019)) goto LA11;
					son_355011 = HEX3Atmp_355014->data[i_355017];
					parsecodeblockfield_354493(d, son_355011, Result);
					i_355017 += ((NI) 1);
				} LA11: ;
			}
		}
	}
	LA7: ;
	LOC12 = 0;
	LOC12 = getargument_333086(n);
	unsureAsgnRef((void**) (&(*Result).langstr), nsuStrip(LOC12, NIM_TRUE, NIM_TRUE, TMP2255));
	{
		if (!!((((*Result).langstr) && ((*Result).langstr)->Sup.len == 0))) goto LA15;
		(*Result).lang = getsourcelanguage_341099((*Result).langstr);
	}
	LA15: ;
	}BeforeRet: ;
}

N_NIMCALL(void, buildlineshtmltable_355035)(Rstgenerator347016* d, Codeblockparams347020* params, NimStringDesc* code, Keyvaluepair145208* Result) {
	NimStringDesc* id;
	NI codelines;
	NimStringDesc* LOC7;
	NI LOC8;
	NI line;
	NimStringDesc* LOC13;
	NimStringDesc* LOC14;
	NimStringDesc* LOC15;
	NimStringDesc* LOC16;
	NimStringDesc* LOC17;
	NimStringDesc* LOC18;
	NimStringDesc* LOC19;
	NimStringDesc* LOC20;
{	(*d).listingcounter += ((NI) 1);
	id = nimIntToStr((*d).listingcounter);
	{
		NimStringDesc* LOC5;
		NimStringDesc* LOC6;
		if (!!((*params).numberlines)) goto LA3;
		LOC5 = 0;
		LOC5 = getordefault_146020((*d).config, ((NimStringDesc*) &TMP2324));
		unsureAsgnRef((void**) (&(*Result).Field0), nsuFormatSingleElem(LOC5, id));
		LOC6 = 0;
		LOC6 = getordefault_146020((*d).config, ((NimStringDesc*) &TMP2325));
		unsureAsgnRef((void**) (&(*Result).Field1), nsuFormatSingleElem(LOC6, id));
		goto BeforeRet;
	}
	LA3: ;
	LOC7 = 0;
	LOC7 = nsuStrip(code, NIM_TRUE, NIM_TRUE, TMP2255);
	LOC8 = 0;
	LOC8 = nsuCountLines(LOC7);
	codelines = (NI)(((NI) 1) + LOC8);
	unsureAsgnRef((void**) (&(*Result).Field0), copyString(((NimStringDesc*) &TMP2326)));
	line = (*params).startline;
	{
		while (1) {
			NimStringDesc* LOC11;
			NimStringDesc* LOC12;
			if (!(((NI) 0) < codelines)) goto LA10;
			LOC11 = 0;
			LOC12 = 0;
			LOC12 = nimIntToStr(line);
			LOC11 = rawNewString(LOC12->Sup.len + 1);
appendString(LOC11, LOC12);
appendString(LOC11, ((NimStringDesc*) &TMP2213));
			(*Result).Field0 = resizeString((*Result).Field0, LOC11->Sup.len + 0);
appendString((*Result).Field0, LOC11);
			line += ((NI) 1);
			codelines -= ((NI) 1);
		} LA10: ;
	}
	LOC13 = 0;
	LOC14 = 0;
	LOC14 = getordefault_146020((*d).config, ((NimStringDesc*) &TMP2324));
	LOC15 = 0;
	LOC15 = nsuFormatSingleElem(LOC14, id);
	LOC13 = rawNewString(LOC15->Sup.len + 15);
appendString(LOC13, ((NimStringDesc*) &TMP2327));
appendString(LOC13, LOC15);
	(*Result).Field0 = resizeString((*Result).Field0, LOC13->Sup.len + 0);
appendString((*Result).Field0, LOC13);
	LOC16 = 0;
	LOC17 = 0;
	LOC17 = getordefault_146020((*d).config, ((NimStringDesc*) &TMP2325));
	LOC18 = 0;
	LOC18 = nsuFormatSingleElem(LOC17, id);
	LOC19 = 0;
	LOC19 = getordefault_146020((*d).config, ((NimStringDesc*) &TMP2329));
	LOC20 = 0;
	LOC20 = nsuFormatSingleElem(LOC19, id);
	LOC16 = rawNewString(LOC18->Sup.len + LOC20->Sup.len + 26);
appendString(LOC16, LOC18);
appendString(LOC16, ((NimStringDesc*) &TMP2328));
appendString(LOC16, LOC20);
	unsureAsgnRef((void**) (&(*Result).Field1), LOC16);
	}BeforeRet: ;
}

N_NIMCALL(void, rendercodeblock_355233)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result) {
	Codeblockparams347020 params;
	Rstnode332011* m;
	Keyvaluepair145208 LOC5;
	NimStringDesc* blockstart;
	NimStringDesc* blockend;
	TY253724 LOC6;
	TY253724 LOC27;
{	{
		if (!((*n).sons->data[((NI) 2)] == NIM_NIL)) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	memset((void*)(&params), 0, sizeof(params));
	chckNil((void*)(&params));
	memset((void*)(&params), 0, sizeof(params));
	parsecodeblockparams_354508(d, n, (&params));
	m = (*(*n).sons->data[((NI) 2)]).sons->data[((NI) 0)];
	memset((void*)(&LOC5), 0, sizeof(LOC5));
	buildlineshtmltable_355035(d, (&params), (*m).text, (&LOC5));
	blockstart = 0;
	blockstart = LOC5.Field0;
	blockend = 0;
	blockend = LOC5.Field1;
	memset((void*)LOC6, 0, sizeof(LOC6));
	dispa_347689((*d).target, result, blockstart, ((NimStringDesc*) &TMP2330), LOC6, 0);
	{
		if (!(params.lang == ((NU8) 0))) goto LA9;
		{
			if (!(((NI) 0) < (params.langstr ? params.langstr->Sup.len : 0))) goto LA13;
			(*d).msghandler((*d).filename, ((NI) 1), ((NI) 0), ((NU8) 8), params.langstr);
		}
		LA13: ;
		{
			NIM_CHAR letter_355616;
			NimStringDesc* HEX3Atmp_355628;
			NI i_355631;
			NI L_355633;
			letter_355616 = 0;
			HEX3Atmp_355628 = 0;
			HEX3Atmp_355628 = (*m).text;
			i_355631 = ((NI) 0);
			L_355633 = (HEX3Atmp_355628 ? HEX3Atmp_355628->Sup.len : 0);
			{
				while (1) {
					if (!(i_355631 < L_355633)) goto LA17;
					letter_355616 = HEX3Atmp_355628->data[i_355631];
					escchar_347494((*d).target, result, letter_355616);
					i_355631 += ((NI) 1);
				} LA17: ;
			}
		}
	}
	goto LA7;
	LA9: ;
	{
		Generaltokenizer341023 g;
		memset((void*)(&g), 0, sizeof(g));
		g.Sup.m_type = (&NTI341023);
		initgeneraltokenizer_341289((&g), (*m).text);
		{
			while (1) {
				getnexttoken_343766((&g), params.lang);
				switch (g.kind) {
				case ((NU8) 0):
				{
					goto LA19;
				}
				break;
				case ((NU8) 1):
				case ((NU8) 2):
				{
					NimStringDesc* LOC23;
					LOC23 = 0;
					LOC23 = copyStrLast((*m).text, g.start, (NI)((NI)(g.length + g.start) - ((NI) 1)));
					(*result) = resizeString((*result), LOC23->Sup.len + 0);
appendString((*result), LOC23);
				}
				break;
				default:
				{
					TY193306 LOC25;
					NimStringDesc* LOC26;
					memset((void*)LOC25, 0, sizeof(LOC25));
					LOC26 = 0;
					LOC26 = copyStrLast((*m).text, g.start, (NI)((NI)(g.length + g.start) - ((NI) 1)));
					LOC25[0] = esc_347553((*d).target, LOC26, ((NI) -1));
					LOC25[1] = copyString(tokenclasstostr_341087[(g.kind)- 0]);
					dispa_347689((*d).target, result, ((NimStringDesc*) &TMP2492), ((NimStringDesc*) &TMP2493), LOC25, 2);
				}
				break;
				}
			}
		} LA19: ;
		deinitgeneraltokenizer_341300((&g));
	}
	LA7: ;
	memset((void*)LOC27, 0, sizeof(LOC27));
	dispa_347689((*d).target, result, blockend, ((NimStringDesc*) &TMP2527), LOC27, 0);
	}BeforeRet: ;
}

N_NIMCALL(void, rendercontainer_355658)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result) {
	NimStringDesc* tmp;
	NimStringDesc* arg;
	NimStringDesc* LOC1;
	tmp = copyString(((NimStringDesc*) &TMP2204));
	renderrsttoout_347724(d, (*n).sons->data[((NI) 2)], (&tmp));
	LOC1 = 0;
	LOC1 = getargument_333086(n);
	arg = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE, TMP2255);
	{
		TY192421 LOC6;
		if (!((arg) && (arg)->Sup.len == 0)) goto LA4;
		memset((void*)LOC6, 0, sizeof(LOC6));
		LOC6[0] = copyString(tmp);
		dispa_347689((*d).target, result, ((NimStringDesc*) &TMP2528), ((NimStringDesc*) &TMP2260), LOC6, 1);
	}
	goto LA2;
	LA4: ;
	{
		TY193306 LOC8;
		memset((void*)LOC8, 0, sizeof(LOC8));
		LOC8[0] = copyString(arg);
		LOC8[1] = copyString(tmp);
		dispa_347689((*d).target, result, ((NimStringDesc*) &TMP2529), ((NimStringDesc*) &TMP2530), LOC8, 2);
	}
	LA2: ;
}

N_NIMCALL(void, renderindexterm_348068)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result) {
	NimStringDesc* refname;
	NimStringDesc* id;
	NimStringDesc* LOC8;
	NI LOC9;
	NimStringDesc* LOC10;
	NimStringDesc* term;
	TY193306 LOC11;
	refname = rstnodetorefname_333067(n);
	{
		NIM_BOOL LOC3;
		NI LOC6;
		LOC3 = 0;
		LOC3 = haskey_348076((*d).seenindexterms, refname);
		if (!LOC3) goto LA4;
		LOC6 = 0;
		LOC6 = getordefault_348120((*d).seenindexterms, refname);
		HEX5BHEX5DHEX3D_348152((&(*d).seenindexterms), refname, (NI)(LOC6 + ((NI) 1)));
	}
	goto LA1;
	LA4: ;
	{
		HEX5BHEX5DHEX3D_348152((&(*d).seenindexterms), refname, ((NI) 1));
	}
	LA1: ;
	LOC8 = 0;
	LOC9 = 0;
	LOC9 = getordefault_348120((*d).seenindexterms, refname);
	LOC10 = 0;
	LOC10 = nimIntToStr(LOC9);
	LOC8 = rawNewString(refname->Sup.len + LOC10->Sup.len + 1);
appendString(LOC8, refname);
appendChar(LOC8, 95);
appendString(LOC8, LOC10);
	id = LOC8;
	term = copyString(((NimStringDesc*) &TMP2204));
	renderaux_347734(d, n, (&term));
	setindexterm_347855(d, id, term, (*d).currentsection, ((NimStringDesc*) &TMP2204));
	memset((void*)LOC11, 0, sizeof(LOC11));
	LOC11[0] = copyString(id);
	LOC11[1] = copyString(term);
	dispa_347689((*d).target, result, ((NimStringDesc*) &TMP2544), ((NimStringDesc*) &TMP2545), LOC11, 2);
}

N_NIMCALL(void, rendersmiley_354479)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result) {
	TY192421 LOC1;
	NimStringDesc* LOC2;
	memset((void*)LOC1, 0, sizeof(LOC1));
	LOC2 = 0;
	LOC2 = getordefault_146020((*d).config, ((NimStringDesc*) &TMP2550));
	LOC1[0] = nsuFormatSingleElem(LOC2, (*n).text);
	dispa_347689((*d).target, result, ((NimStringDesc*) &TMP2548), ((NimStringDesc*) &TMP2549), LOC1, 1);
}

N_NIMCALL(void, renderrsttoout_347724)(Rstgenerator347016* d, Rstnode332011* n, NimStringDesc** result) {
{	{
		if (!(n == NIM_NIL)) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	switch ((*n).kind) {
	case ((NU8) 0):
	{
		renderaux_347734(d, n, result);
	}
	break;
	case ((NU8) 1):
	{
		renderheadline_353861(d, n, result);
	}
	break;
	case ((NU8) 2):
	{
		renderoverline_354045(d, n, result);
	}
	break;
	case ((NU8) 3):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2219), ((NimStringDesc*) &TMP2220), result);
	}
	break;
	case ((NU8) 4):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2221), ((NimStringDesc*) &TMP2222), result);
	}
	break;
	case ((NU8) 5):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2223), ((NimStringDesc*) &TMP2224), result);
	}
	break;
	case ((NU8) 6):
	case ((NU8) 8):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2225), ((NimStringDesc*) &TMP2226), result);
	}
	break;
	case ((NU8) 7):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2227), ((NimStringDesc*) &TMP2228), result);
	}
	break;
	case ((NU8) 9):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2229), ((NimStringDesc*) &TMP2230), result);
	}
	break;
	case ((NU8) 10):
	{
		renderaux_347734(d, n, result);
	}
	break;
	case ((NU8) 11):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2231), ((NimStringDesc*) &TMP2232), result);
	}
	break;
	case ((NU8) 12):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2233), ((NimStringDesc*) &TMP2234), result);
	}
	break;
	case ((NU8) 13):
	{
		NimStringDesc* tmp;
		tmp = copyString(((NimStringDesc*) &TMP2204));
		{
			NI i_355772;
			NI HEX3Atmp_355834;
			NI LOC19;
			NI res_355837;
			i_355772 = 0;
			HEX3Atmp_355834 = 0;
			LOC19 = 0;
			LOC19 = len_332090(n);
			HEX3Atmp_355834 = (NI)(LOC19 - ((NI) 1));
			res_355837 = ((NI) 0);
			{
				while (1) {
					if (!(res_355837 <= HEX3Atmp_355834)) goto LA21;
					i_355772 = res_355837;
					renderrsttoout_347724(d, (*n).sons->data[i_355772], (&tmp));
					res_355837 += ((NI) 1);
				} LA21: ;
			}
		}
		{
			TY192421 LOC26;
			if (!!(((tmp ? tmp->Sup.len : 0) == ((NI) 0)))) goto LA24;
			memset((void*)LOC26, 0, sizeof(LOC26));
			LOC26[0] = copyString(tmp);
			dispa_347689((*d).target, result, ((NimStringDesc*) &TMP2235), ((NimStringDesc*) &TMP2230), LOC26, 1);
		}
		LA24: ;
	}
	break;
	case ((NU8) 14):
	{
		renderfield_355717(d, n, result);
	}
	break;
	case ((NU8) 15):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2261), ((NimStringDesc*) &TMP2262), result);
	}
	break;
	case ((NU8) 16):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2263), ((NimStringDesc*) &TMP2264), result);
	}
	break;
	case ((NU8) 51):
	{
		renderrsttoout_347724(d, (*n).sons->data[((NI) 2)], result);
	}
	break;
	case ((NU8) 17):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2265), ((NimStringDesc*) &TMP2266), result);
	}
	break;
	case ((NU8) 18):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2259), ((NimStringDesc*) &TMP2260), result);
	}
	break;
	case ((NU8) 19):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2267), ((NimStringDesc*) &TMP2268), result);
	}
	break;
	case ((NU8) 23):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2269), ((NimStringDesc*) &TMP2264), result);
	}
	break;
	case ((NU8) 20):
	case ((NU8) 21):
	case ((NU8) 22):
	{
		{
			if (!NIM_TRUE) goto LA38;
			raiseassert_90971(((NimStringDesc*) &TMP2271));
		}
		LA38: ;
	}
	break;
	case ((NU8) 24):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2272), ((NimStringDesc*) &TMP2273), result);
	}
	break;
	case ((NU8) 25):
	{
		{
			if (!NIM_TRUE) goto LA44;
			raiseassert_90971(((NimStringDesc*) &TMP2271));
		}
		LA44: ;
	}
	break;
	case ((NU8) 26):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2274), ((NimStringDesc*) &TMP2222), result);
	}
	break;
	case ((NU8) 27):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2275), ((NimStringDesc*) &TMP2276), result);
	}
	break;
	case ((NU8) 28):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2277), ((NimStringDesc*) &TMP2278), result);
	}
	break;
	case ((NU8) 29):
	case ((NU8) 30):
	{
		NimStringDesc* LOC50;
		NimStringDesc* LOC51;
		LOC50 = 0;
		LOC51 = 0;
		LOC51 = texcolumns_355677(n);
		LOC50 = rawNewString(LOC51->Sup.len + 63);
appendString(LOC50, ((NimStringDesc*) &TMP2280));
appendString(LOC50, LOC51);
appendString(LOC50, ((NimStringDesc*) &TMP2282));
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2279), LOC50, result);
	}
	break;
	case ((NU8) 31):
	{
		{
			NI LOC55;
			LOC55 = 0;
			LOC55 = len_332090(n);
			if (!(((NI) 1) <= LOC55)) goto LA56;
			{
				if (!((*d).target == ((NU8) 1))) goto LA60;
				renderrsttoout_347724(d, (*n).sons->data[((NI) 0)], result);
				{
					NI i_355797;
					NI HEX3Atmp_355842;
					NI LOC63;
					NI res_355845;
					i_355797 = 0;
					HEX3Atmp_355842 = 0;
					LOC63 = 0;
					LOC63 = len_332090(n);
					HEX3Atmp_355842 = (NI)(LOC63 - ((NI) 1));
					res_355845 = ((NI) 1);
					{
						while (1) {
							if (!(res_355845 <= HEX3Atmp_355842)) goto LA65;
							i_355797 = res_355845;
							(*result) = resizeString((*result), 3);
appendString((*result), ((NimStringDesc*) &TMP2283));
							renderrsttoout_347724(d, (*n).sons->data[i_355797], result);
							res_355845 += ((NI) 1);
						} LA65: ;
					}
				}
				(*result) = resizeString((*result), 10);
appendString((*result), ((NimStringDesc*) &TMP2284));
			}
			goto LA58;
			LA60: ;
			{
				(*result) = resizeString((*result), 4);
appendString((*result), ((NimStringDesc*) &TMP2285));
				renderaux_347734(d, n, result);
				(*result) = resizeString((*result), 6);
appendString((*result), ((NimStringDesc*) &TMP2286));
			}
			LA58: ;
		}
		LA56: ;
	}
	break;
	case ((NU8) 33):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2263), ((NimStringDesc*) &TMP2260), result);
	}
	break;
	case ((NU8) 32):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2287), ((NimStringDesc*) &TMP2288), result);
	}
	break;
	case ((NU8) 34):
	{
		{
			if (!NIM_TRUE) goto LA72;
			raiseassert_90971(((NimStringDesc*) &TMP2271));
		}
		LA72: ;
	}
	break;
	case ((NU8) 35):
	{
		{
			if (!NIM_TRUE) goto LA77;
			raiseassert_90971(((NimStringDesc*) &TMP2271));
		}
		LA77: ;
	}
	break;
	case ((NU8) 36):
	{
		{
			if (!NIM_TRUE) goto LA82;
			raiseassert_90971(((NimStringDesc*) &TMP2271));
		}
		LA82: ;
	}
	break;
	case ((NU8) 39):
	{
		NimStringDesc* tmp;
		TY193306 LOC85;
		tmp = copyString(((NimStringDesc*) &TMP2204));
		renderaux_347734(d, n, (&tmp));
		memset((void*)LOC85, 0, sizeof(LOC85));
		LOC85[0] = copyString(tmp);
		LOC85[1] = rstnodetorefname_333067(n);
		dispa_347689((*d).target, result, ((NimStringDesc*) &TMP2289), ((NimStringDesc*) &TMP2290), LOC85, 2);
	}
	break;
	case ((NU8) 37):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2291), ((NimStringDesc*) &TMP2292), result);
	}
	break;
	case ((NU8) 38):
	{
		NimStringDesc* tmp0;
		NimStringDesc* tmp1;
		TY193306 LOC88;
		tmp0 = copyString(((NimStringDesc*) &TMP2204));
		tmp1 = copyString(((NimStringDesc*) &TMP2204));
		renderrsttoout_347724(d, (*n).sons->data[((NI) 0)], (&tmp0));
		renderrsttoout_347724(d, (*n).sons->data[((NI) 1)], (&tmp1));
		memset((void*)LOC88, 0, sizeof(LOC88));
		LOC88[0] = copyString(tmp0);
		LOC88[1] = copyString(tmp1);
		dispa_347689((*d).target, result, ((NimStringDesc*) &TMP2293), ((NimStringDesc*) &TMP2294), LOC88, 2);
	}
	break;
	case ((NU8) 41):
	case ((NU8) 42):
	{
		renderaux_347734(d, n, result);
	}
	break;
	case ((NU8) 48):
	{
		{
			Rstnode332011* LOC95;
			NimStringDesc* LOC96;
			if (!!(((*d).target == ((NU8) 1)))) goto LA93;
			LOC95 = 0;
			LOC95 = lastson_332153(n);
			LOC96 = 0;
			LOC96 = addnodes_333073(LOC95);
			(*result) = resizeString((*result), LOC96->Sup.len + 0);
appendString((*result), LOC96);
		}
		LA93: ;
	}
	break;
	case ((NU8) 49):
	{
		{
			Rstnode332011* LOC102;
			NimStringDesc* LOC103;
			if (!((*d).target == ((NU8) 1))) goto LA100;
			LOC102 = 0;
			LOC102 = lastson_332153(n);
			LOC103 = 0;
			LOC103 = addnodes_333073(LOC102);
			(*result) = resizeString((*result), LOC103->Sup.len + 0);
appendString((*result), LOC103);
		}
		LA100: ;
	}
	break;
	case ((NU8) 45):
	case ((NU8) 46):
	{
		renderimage_354213(d, n, result);
	}
	break;
	case ((NU8) 47):
	{
		rendercodeblock_355233(d, n, result);
	}
	break;
	case ((NU8) 50):
	{
		rendercontainer_355658(d, n, result);
	}
	break;
	case ((NU8) 62):
	case ((NU8) 52):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2531), ((NimStringDesc*) &TMP2531), result);
	}
	break;
	case ((NU8) 40):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2204), ((NimStringDesc*) &TMP2204), result);
	}
	break;
	case ((NU8) 53):
	{
		NimStringDesc* tmp0;
		NimStringDesc* tmp1;
		TY193306 LOC110;
		tmp0 = copyString(((NimStringDesc*) &TMP2204));
		tmp1 = copyString(((NimStringDesc*) &TMP2204));
		renderrsttoout_347724(d, (*n).sons->data[((NI) 0)], (&tmp0));
		renderrsttoout_347724(d, (*n).sons->data[((NI) 1)], (&tmp1));
		memset((void*)LOC110, 0, sizeof(LOC110));
		LOC110[0] = copyString(tmp0);
		LOC110[1] = copyString(tmp1);
		dispa_347689((*d).target, result, ((NimStringDesc*) &TMP2492), ((NimStringDesc*) &TMP2493), LOC110, 2);
	}
	break;
	case ((NU8) 54):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2532), ((NimStringDesc*) &TMP2533), result);
	}
	break;
	case ((NU8) 55):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2534), ((NimStringDesc*) &TMP2535), result);
	}
	break;
	case ((NU8) 57):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2536), ((NimStringDesc*) &TMP2537), result);
	}
	break;
	case ((NU8) 58):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2538), ((NimStringDesc*) &TMP2288), result);
	}
	break;
	case ((NU8) 59):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2539), ((NimStringDesc*) &TMP2540), result);
	}
	break;
	case ((NU8) 60):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2541), ((NimStringDesc*) &TMP2537), result);
	}
	break;
	case ((NU8) 56):
	{
		renderindexterm_348068(d, n, result);
	}
	break;
	case ((NU8) 61):
	{
		renderaux_347776(d, n, ((NimStringDesc*) &TMP2546), ((NimStringDesc*) &TMP2547), result);
	}
	break;
	case ((NU8) 63):
	{
		rendersmiley_354479(d, n, result);
	}
	break;
	case ((NU8) 64):
	{
		NimStringDesc* LOC121;
		LOC121 = 0;
		LOC121 = esc_347553((*d).target, (*n).text, ((NI) -1));
		(*result) = resizeString((*result), LOC121->Sup.len + 0);
appendString((*result), LOC121);
	}
	break;
	case ((NU8) 44):
	{
		(*d).hastoc = NIM_TRUE;
	}
	break;
	case ((NU8) 43):
	{
		unsureAsgnRef((void**) (&(*d).meta[(((NU8) 1))- 0]), copyString(((NimStringDesc*) &TMP2204)));
		renderrsttoout_347724(d, (*n).sons->data[((NI) 0)], (&(*d).meta[(((NU8) 1))- 0]));
	}
	break;
	}
	}BeforeRet: ;
}
N_NIMCALL(void, TMP5018)(void* p, NI op) {
	TY347035* a;
	NI LOC1;
	a = (TY347035*)p;
	LOC1 = 0;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1].n, op);
	nimGCvisit((void*)a->data[LOC1].refname, op);
	nimGCvisit((void*)a->data[LOC1].header, op);
	}
}

N_NIMCALL(void, initrstgenerator_347096)(Rstgenerator347016* g, NU8 target, Stringtableobj145212* config, NimStringDesc* filename, NU8 options, Findfilehandler333023 findfile, Msghandler333021 msghandler) {
	TY123809 fileparts;
	NimStringDesc* s;
	unsureAsgnRef((void**) (&(*g).config), config);
	(*g).target = target;
	unsureAsgnRef((void**) (&(*g).tocpart), (TY347035*) newSeq((&NTI347035), 0));
	unsureAsgnRef((void**) (&(*g).filename), copyString(filename));
	(*g).splitafter = ((NI) 20);
	unsureAsgnRef((void**) (&(*g).theindex), copyString(((NimStringDesc*) &TMP2204)));
	(*g).options = options;
	(*g).findfile = findfile;
	unsureAsgnRef((void**) (&(*g).currentsection), copyString(((NimStringDesc*) &TMP2204)));
	memset((void*)(&fileparts), 0, sizeof(fileparts));
	chckNil((void*)(&fileparts));
	memset((void*)(&fileparts), 0, sizeof(fileparts));
	nossplitFile(filename, (&fileparts));
	{
		NimStringDesc* LOC5;
		if (!eqStrings(fileparts.Field2, ((NimStringDesc*) &TMP5022))) goto LA3;
		LOC5 = 0;
		LOC5 = rawNewString(fileparts.Field1->Sup.len + 7);
appendString(LOC5, ((NimStringDesc*) &TMP5023));
appendString(LOC5, fileparts.Field1);
		unsureAsgnRef((void**) (&(*g).currentsection), LOC5);
	}
	LA3: ;
	inittable_347124(((NI) 64), (&(*g).seenindexterms));
	(*g).msghandler = msghandler;
	s = getordefault_146020(config, ((NimStringDesc*) &TMP5024));
	{
		if (!!(((s) && (s)->Sup.len == 0))) goto LA8;
		(*g).splitafter = nsuParseInt(s);
	}
	LA8: ;
	{
		NU8 i_347423;
		NI res_347427;
		i_347423 = 0;
		res_347427 = ((NI) 0);
		{
			while (1) {
				if (!(res_347427 <= ((NI) 4))) goto LA12;
				i_347423 = ((NU8) (res_347427));
				unsureAsgnRef((void**) (&(*g).meta[(i_347423)- 0]), copyString(((NimStringDesc*) &TMP2204)));
				res_347427 += ((NI) 1);
			} LA12: ;
		}
	}
}

N_NIMCALL(void, rendertocentry_354162)(Rstgenerator347016* d, Tocentry347012* e, NimStringDesc** result) {
	TY193306 LOC1;
	memset((void*)LOC1, 0, sizeof(LOC1));
	LOC1[0] = copyString((*e).refname);
	LOC1[1] = copyString((*e).header);
	dispa_347689((*d).target, result, ((NimStringDesc*) &TMP5103), ((NimStringDesc*) &TMP5104), LOC1, 2);
}

N_NIMCALL(void, rendertocentries_354176)(Rstgenerator347016* d, NI* j, NI lvl, NimStringDesc** result) {
	NimStringDesc* tmp;
	tmp = copyString(((NimStringDesc*) &TMP2204));
	{
		while (1) {
			NI a;
			if (!((*j) <= ((*d).tocpart ? ((*d).tocpart->Sup.len-1) : -1))) goto LA2;
			a = ((*(*d).tocpart->data[(*j)].n).level > 0? ((*(*d).tocpart->data[(*j)].n).level) : -((*(*d).tocpart->data[(*j)].n).level));
			{
				if (!(a == lvl)) goto LA5;
				rendertocentry_354162(d, (&(*d).tocpart->data[(*j)]), (&tmp));
				(*j) += ((NI) 1);
			}
			goto LA3;
			LA5: ;
			{
				if (!(lvl < a)) goto LA8;
				rendertocentries_354176(d, j, a, (&tmp));
			}
			goto LA3;
			LA8: ;
			{
				goto LA1;
			}
			LA3: ;
		} LA2: ;
	} LA1: ;
	{
		TY192421 LOC15;
		if (!(((NI) 1) < lvl)) goto LA13;
		memset((void*)LOC15, 0, sizeof(LOC15));
		LOC15[0] = copyString(tmp);
		dispa_347689((*d).target, result, ((NimStringDesc*) &TMP5105), ((NimStringDesc*) &TMP5106), LOC15, 1);
	}
	goto LA11;
	LA13: ;
	{
		(*result) = resizeString((*result), tmp->Sup.len + 0);
appendString((*result), tmp);
	}
	LA11: ;
}

N_NIMCALL(void, writeindexfile_347445)(Rstgenerator347016* g, NimStringDesc* outfile) {
	{
		if (!(((NI) 0) < ((*g).theindex ? (*g).theindex->Sup.len : 0))) goto LA3;
		writefile_16875(outfile, (*g).theindex);
	}
	LA3: ;
}
N_NIMCALL(void, TMP5175)(void* p, NI op) {
	TY351507* a;
	NI LOC1;
	a = (TY351507*)p;
	LOC1 = 0;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1].keyword, op);
	nimGCvisit((void*)a->data[LOC1].link, op);
	nimGCvisit((void*)a->data[LOC1].linktitle, op);
	nimGCvisit((void*)a->data[LOC1].linkdesc, op);
	}
}

static N_INLINE(NIM_BOOL, direxists_127020)(NimStringDesc* dir) {
	NIM_BOOL result;
	result = 0;
	result = nosexistsDir(dir);
	return result;
}

N_NIMCALL(NIM_BOOL, isdocumentationtitle_348979)(NimStringDesc* hyperlink) {
	NIM_BOOL result;
	NI LOC1;
	result = 0;
	LOC1 = 0;
	LOC1 = nsuFindChar(hyperlink, 35, ((NI) 0));
	result = (LOC1 < ((NI) 0));
	return result;
}

N_NIMCALL(NimStringDesc*, unquoteindexcolumn_347845)(NimStringDesc* text) {
	NimStringDesc* result;
	NimStringDesc* LOC1;
	NimStringDesc* LOC2;
	result = 0;
	LOC1 = 0;
	LOC1 = nsuReplaceStr(text, ((NimStringDesc*) &TMP2216), ((NimStringDesc*) &TMP2215));
	LOC2 = 0;
	LOC2 = nsuReplaceStr(LOC1, ((NimStringDesc*) &TMP2214), ((NimStringDesc*) &TMP2213));
	result = nsuReplaceStr(LOC2, ((NimStringDesc*) &TMP2212), ((NimStringDesc*) &TMP2211));
	return result;
}

static N_INLINE(NI, HEX21HEX26_142013)(NI h, NI val) {
	NI result;
	result = 0;
	result = (NI)((NU64)(h) + (NU64)(val));
	result = (NI)((NU64)(result) + (NU64)((NI)((NU64)(result) << (NU64)(((NI) 10)))));
	result = (NI)(result ^ (NI)((NU64)(result) >> (NU64)(((NI) 6))));
	return result;
}

static N_INLINE(NimStringDesc*, or_347713)(NimStringDesc* x, NimStringDesc* y) {
	NimStringDesc* result;
	result = 0;
	{
		if (!x == 0) goto LA3;
		result = copyString(y);
	}
	goto LA1;
	LA3: ;
	{
		result = copyString(x);
	}
	LA1: ;
	return result;
}

static N_INLINE(NI, HEX21HEX24_142042)(NI h) {
	NI result;
	result = 0;
	result = (NI)((NU64)(h) + (NU64)((NI)((NU64)(h) << (NU64)(((NI) 3)))));
	result = (NI)(result ^ (NI)((NU64)(result) >> (NU64)(((NI) 11))));
	result = (NI)((NU64)(result) + (NU64)((NI)((NU64)(result) << (NU64)(((NI) 15)))));
	return result;
}

N_NIMCALL(NI, hash_348447)(Indexentry348397* x) {
	NI result;
	NI LOC1;
	NI LOC2;
	NimStringDesc* LOC3;
	NI LOC4;
	NimStringDesc* LOC5;
	NI LOC6;
	result = 0;
	LOC1 = 0;
	LOC1 = hash_142848((*x).keyword);
	LOC2 = 0;
	LOC2 = hash_142848((*x).link);
	result = HEX21HEX26_142013(LOC1, LOC2);
	LOC3 = 0;
	LOC3 = or_347713((*x).linktitle, ((NimStringDesc*) &TMP2204));
	LOC4 = 0;
	LOC4 = hash_142848(LOC3);
	result = HEX21HEX26_142013(result, LOC4);
	LOC5 = 0;
	LOC5 = or_347713((*x).linkdesc, ((NimStringDesc*) &TMP2204));
	LOC6 = 0;
	LOC6 = hash_142848(LOC5);
	result = HEX21HEX26_142013(result, LOC6);
	result = HEX21HEX24_142042(result);
	return result;
}

N_NIMCALL(void, readindexdir_351501)(NimStringDesc* dir, TY351504* Result) {
	NI L;
	TY352105 LOC169;
	unsureAsgnRef((void**) (&(*Result).Field0), (TY130408*) newSeq((&NTI130408), 0));
	inittable_351529(((NI) 32), (&(*Result).Field2));
	unsureAsgnRef((void**) (&(*Result).Field1), (TY351507*) newSeq((&NTI351507), ((NI) 15000)));
	(*Result).Field1 = (TY351507*) setLengthSeq(&((*Result).Field1)->Sup, sizeof(Indexentry348397), ((NI) 0));
	L = ((NI) 0);
	{
		NU8 kind_351636;
		NimStringDesc* path_351637;
		DIR* d_353494;
		kind_351636 = 0;
		path_351637 = 0;
		d_353494 = opendir(dir->data);
		{
			int LOC168;
			if (!!((d_353494 == NIM_NIL))) goto LA4;
			{
				while (1) {
					{
						struct dirent* x_353496;
						NimStringDesc* y_353498;
						x_353496 = readdir(d_353494);
						{
							if (!(x_353496 == NIM_NIL)) goto LA11;
							goto LA6;
						}
						LA11: ;
						y_353498 = cstrToNimstr(((NCSTRING) ((*x_353496).d_name)));
						{
							NIM_BOOL LOC15;
							struct stat s_353500;
							NU8 k_353502;
							LOC15 = 0;
							LOC15 = !(eqStrings(y_353498, ((NimStringDesc*) &TMP5177)));
							if (!(LOC15)) goto LA16;
							LOC15 = !(eqStrings(y_353498, ((NimStringDesc*) &TMP5178)));
							LA16: ;
							if (!LOC15) goto LA17;
							memset((void*)(&s_353500), 0, sizeof(s_353500));
							{
								if (!NIM_TRUE) goto LA21;
								y_353498 = HEX2F_123481(dir, y_353498);
							}
							LA21: ;
							k_353502 = ((NU8) 0);
							{
								if (!!(((*x_353496).d_type == ((NI8) 0)))) goto LA25;
								{
									if (!((*x_353496).d_type == ((NI8) 4))) goto LA29;
									k_353502 = ((NU8) 2);
								}
								LA29: ;
								{
									if (!((*x_353496).d_type == ((NI8) 10))) goto LA33;
									{
										NIM_BOOL LOC37;
										LOC37 = 0;
										LOC37 = direxists_127020(y_353498);
										if (!LOC37) goto LA38;
										k_353502 = ((NU8) 3);
									}
									goto LA35;
									LA38: ;
									{
										k_353502 = (NU8)(k_353502 + ((NI) 1));
									}
									LA35: ;
								}
								LA33: ;
								kind_351636 = k_353502;
								path_351637 = y_353498;
								{
									NIM_BOOL LOC43;
									TY351507* fileentries;
									Indexentry348397 title;
									NI F;
									LOC43 = 0;
									LOC43 = (kind_351636 == ((NU8) 0));
									if (!(LOC43)) goto LA44;
									LOC43 = nsuEndsWith(path_351637, ((NimStringDesc*) &TMP5179));
									LA44: ;
									if (!LOC43) goto LA45;
									fileentries = 0;
									memset((void*)(&title), 0, sizeof(title));
									F = ((NI) 0);
									fileentries = (TY351507*) newSeq((&NTI351507), ((NI) 500));
									fileentries = (TY351507*) setLengthSeq(&(fileentries)->Sup, sizeof(Indexentry348397), ((NI) 0));
									{
										NimStringDesc* line_351672;
										FILE* f_353478;
										NimStringDesc* res_353480;
										line_351672 = 0;
										f_353478 = open_16817(path_351637, ((NU8) 0), ((NI) 8000));
										res_353480 = rawNewString(((NI) 80));
										{
											while (1) {
												NIM_BOOL LOC50;
												LOC50 = 0;
												LOC50 = readline_16919(f_353478, (&res_353480));
												if (!LOC50) goto LA49;
												line_351672 = res_353480;
												{
													NI s;
													s = nsuFindChar(line_351672, 9, ((NI) 0));
													{
														if (!(s < ((NI) 0))) goto LA54;
														goto LA51;
													}
													LA54: ;
													fileentries = (TY351507*) setLengthSeq(&(fileentries)->Sup, sizeof(Indexentry348397), ((NI) ((NI)(F + ((NI) 1)))));
													asgnRefNoCycle((void**) (&fileentries->data[F].keyword), copyStrLast(line_351672, ((NI) 0), (NI)(s - ((NI) 1))));
													asgnRefNoCycle((void**) (&fileentries->data[F].link), copyStr(line_351672, (NI)(s + ((NI) 1))));
													{
														NIM_BOOL LOC58;
														LOC58 = 0;
														LOC58 = title.keyword == 0;
														if (!(LOC58)) goto LA59;
														LOC58 = isdocumentationtitle_348979(fileentries->data[F].link);
														LA59: ;
														if (!LOC58) goto LA60;
														title.keyword = copyString(fileentries->data[F].keyword);
														title.link = copyString(fileentries->data[F].link);
													}
													LA60: ;
													{
														NI LOC64;
														TY130408* extracols;
														NimStringDesc* LOC67;
														LOC64 = 0;
														LOC64 = nsuFindChar(fileentries->data[F].link, 9, ((NI) 0));
														if (!(((NI) 0) < LOC64)) goto LA65;
														extracols = nsuSplitChar(fileentries->data[F].link, 9);
														LOC67 = 0;
														LOC67 = fileentries->data[F].link; fileentries->data[F].link = copyStringRC1(extracols->data[((NI) 0)]);
														if (LOC67) nimGCunrefNoCycle(LOC67);
														asgnRefNoCycle((void**) (&fileentries->data[F].linktitle), unquoteindexcolumn_347845(extracols->data[((NI) 1)]));
														asgnRefNoCycle((void**) (&fileentries->data[F].linkdesc), unquoteindexcolumn_347845(extracols->data[((NI) 2)]));
													}
													goto LA62;
													LA65: ;
													{
														NimStringDesc* LOC69;
														NimStringDesc* LOC70;
														LOC69 = 0;
														LOC69 = fileentries->data[F].linktitle; fileentries->data[F].linktitle = copyStringRC1(NIM_NIL);
														if (LOC69) nimGCunrefNoCycle(LOC69);
														LOC70 = 0;
														LOC70 = fileentries->data[F].linkdesc; fileentries->data[F].linkdesc = copyStringRC1(NIM_NIL);
														if (LOC70) nimGCunrefNoCycle(LOC70);
													}
													LA62: ;
													F += ((NI) 1);
												} LA51: ;
											} LA49: ;
										}
										fclose(f_353478);
									}
									{
										TY123809 LOC91;
										NimStringDesc* LOC92;
										if (!title.keyword == 0) goto LA73;
										{
											NI i_351828;
											NI HEX3Atmp_353484;
											NI res_353487;
											i_351828 = 0;
											HEX3Atmp_353484 = 0;
											HEX3Atmp_353484 = (F - 1);
											res_353487 = ((NI) 0);
											{
												while (1) {
													if (!(res_353487 <= HEX3Atmp_353484)) goto LA77;
													i_351828 = res_353487;
													{
														NimStringDesc* toc;
														NimStringDesc* LOC87;
														NimStringDesc* LOC88;
														NimStringDesc* LOC89;
														NimStringDesc* LOC90;
														toc = fileentries->data[i_351828].linktitle;
														{
															NIM_BOOL LOC81;
															NIM_BOOL LOC82;
															LOC81 = 0;
															LOC82 = 0;
															LOC82 = !(toc == 0);
															if (!(LOC82)) goto LA83;
															LOC82 = (((NI) 0) < (toc ? toc->Sup.len : 0));
															LA83: ;
															LOC81 = LOC82;
															if (!(LOC81)) goto LA84;
															LOC81 = ((NU8)(toc->data[((NI) 0)]) == (NU8)(32));
															LA84: ;
															if (!LOC81) goto LA85;
															goto LA78;
														}
														LA85: ;
														(*Result).Field1 = (TY351507*) setLengthSeq(&((*Result).Field1)->Sup, sizeof(Indexentry348397), ((NI) ((NI)(L + ((NI) 1)))));
														LOC87 = 0;
														LOC87 = (*Result).Field1->data[L].keyword; (*Result).Field1->data[L].keyword = copyStringRC1(fileentries->data[i_351828].keyword);
														if (LOC87) nimGCunrefNoCycle(LOC87);
														LOC88 = 0;
														LOC88 = (*Result).Field1->data[L].link; (*Result).Field1->data[L].link = copyStringRC1(fileentries->data[i_351828].link);
														if (LOC88) nimGCunrefNoCycle(LOC88);
														LOC89 = 0;
														LOC89 = (*Result).Field1->data[L].linktitle; (*Result).Field1->data[L].linktitle = copyStringRC1(fileentries->data[i_351828].linktitle);
														if (LOC89) nimGCunrefNoCycle(LOC89);
														LOC90 = 0;
														LOC90 = (*Result).Field1->data[L].linkdesc; (*Result).Field1->data[L].linkdesc = copyStringRC1(fileentries->data[i_351828].linkdesc);
														if (LOC90) nimGCunrefNoCycle(LOC90);
														L += ((NI) 1);
													} LA78: ;
													res_353487 += ((NI) 1);
												} LA77: ;
											}
										}
										memset((void*)(&LOC91), 0, sizeof(LOC91));
										nossplitFile(path_351637, (&LOC91));
										(*Result).Field0 = (TY130408*) incrSeqV2(&((*Result).Field0)->Sup, sizeof(NimStringDesc*));
										LOC92 = 0;
										LOC92 = (*Result).Field0->data[(*Result).Field0->Sup.len]; (*Result).Field0->data[(*Result).Field0->Sup.len] = copyStringRC1(LOC91.Field1);
										if (LOC92) nimGCunrefNoCycle(LOC92);
										++(*Result).Field0->Sup.len;
									}
									goto LA71;
									LA73: ;
									{
										NimStringDesc* LOC94;
										NI LOC95;
										NimStringDesc* LOC96;
										LOC94 = 0;
										LOC95 = 0;
										LOC95 = len_351860((*Result).Field2);
										LOC96 = 0;
										LOC96 = nimIntToStr(LOC95);
										LOC94 = rawNewString(LOC96->Sup.len + 8);
appendString(LOC94, ((NimStringDesc*) &TMP5180));
appendString(LOC94, LOC96);
										title.linktitle = LOC94;
										HEX5BHEX5DHEX3D_351872((&(*Result).Field2), (&title), fileentries);
									}
									LA71: ;
								}
								LA45: ;
								goto LA8;
							}
							LA25: ;
							{
								int LOC99;
								LOC99 = 0;
								LOC99 = lstat(y_353498->data, (&s_353500));
								if (!(LOC99 < ((NI32) 0))) goto LA100;
								goto LA6;
							}
							LA100: ;
							{
								NIM_BOOL LOC104;
								LOC104 = 0;
								LOC104 = S_ISDIR(s_353500.st_mode);
								if (!LOC104) goto LA105;
								k_353502 = ((NU8) 2);
							}
							LA105: ;
							{
								NIM_BOOL LOC109;
								LOC109 = 0;
								LOC109 = S_ISLNK(s_353500.st_mode);
								if (!LOC109) goto LA110;
								k_353502 = (NU8)(k_353502 + ((NI) 1));
							}
							LA110: ;
							kind_351636 = k_353502;
							path_351637 = y_353498;
							{
								NIM_BOOL LOC114;
								TY351507* fileentries_353504;
								Indexentry348397 title_353506;
								NI F_353508;
								LOC114 = 0;
								LOC114 = (kind_351636 == ((NU8) 0));
								if (!(LOC114)) goto LA115;
								LOC114 = nsuEndsWith(path_351637, ((NimStringDesc*) &TMP5179));
								LA115: ;
								if (!LOC114) goto LA116;
								fileentries_353504 = 0;
								memset((void*)(&title_353506), 0, sizeof(title_353506));
								F_353508 = ((NI) 0);
								fileentries_353504 = (TY351507*) newSeq((&NTI351507), ((NI) 500));
								fileentries_353504 = (TY351507*) setLengthSeq(&(fileentries_353504)->Sup, sizeof(Indexentry348397), ((NI) 0));
								{
									NimStringDesc* line_353510;
									FILE* f_353512;
									NimStringDesc* res_353514;
									line_353510 = 0;
									f_353512 = open_16817(path_351637, ((NU8) 0), ((NI) 8000));
									res_353514 = rawNewString(((NI) 80));
									{
										while (1) {
											NIM_BOOL LOC121;
											LOC121 = 0;
											LOC121 = readline_16919(f_353512, (&res_353514));
											if (!LOC121) goto LA120;
											line_353510 = res_353514;
											{
												NI s_353517;
												s_353517 = nsuFindChar(line_353510, 9, ((NI) 0));
												{
													if (!(s_353517 < ((NI) 0))) goto LA125;
													goto LA122;
												}
												LA125: ;
												fileentries_353504 = (TY351507*) setLengthSeq(&(fileentries_353504)->Sup, sizeof(Indexentry348397), ((NI) ((NI)(F_353508 + ((NI) 1)))));
												asgnRefNoCycle((void**) (&fileentries_353504->data[F_353508].keyword), copyStrLast(line_353510, ((NI) 0), (NI)(s_353517 - ((NI) 1))));
												asgnRefNoCycle((void**) (&fileentries_353504->data[F_353508].link), copyStr(line_353510, (NI)(s_353517 + ((NI) 1))));
												{
													NIM_BOOL LOC129;
													LOC129 = 0;
													LOC129 = title_353506.keyword == 0;
													if (!(LOC129)) goto LA130;
													LOC129 = isdocumentationtitle_348979(fileentries_353504->data[F_353508].link);
													LA130: ;
													if (!LOC129) goto LA131;
													title_353506.keyword = copyString(fileentries_353504->data[F_353508].keyword);
													title_353506.link = copyString(fileentries_353504->data[F_353508].link);
												}
												LA131: ;
												{
													NI LOC135;
													TY130408* extracols_353519;
													NimStringDesc* LOC138;
													LOC135 = 0;
													LOC135 = nsuFindChar(fileentries_353504->data[F_353508].link, 9, ((NI) 0));
													if (!(((NI) 0) < LOC135)) goto LA136;
													extracols_353519 = nsuSplitChar(fileentries_353504->data[F_353508].link, 9);
													LOC138 = 0;
													LOC138 = fileentries_353504->data[F_353508].link; fileentries_353504->data[F_353508].link = copyStringRC1(extracols_353519->data[((NI) 0)]);
													if (LOC138) nimGCunrefNoCycle(LOC138);
													asgnRefNoCycle((void**) (&fileentries_353504->data[F_353508].linktitle), unquoteindexcolumn_347845(extracols_353519->data[((NI) 1)]));
													asgnRefNoCycle((void**) (&fileentries_353504->data[F_353508].linkdesc), unquoteindexcolumn_347845(extracols_353519->data[((NI) 2)]));
												}
												goto LA133;
												LA136: ;
												{
													NimStringDesc* LOC140;
													NimStringDesc* LOC141;
													LOC140 = 0;
													LOC140 = fileentries_353504->data[F_353508].linktitle; fileentries_353504->data[F_353508].linktitle = copyStringRC1(NIM_NIL);
													if (LOC140) nimGCunrefNoCycle(LOC140);
													LOC141 = 0;
													LOC141 = fileentries_353504->data[F_353508].linkdesc; fileentries_353504->data[F_353508].linkdesc = copyStringRC1(NIM_NIL);
													if (LOC141) nimGCunrefNoCycle(LOC141);
												}
												LA133: ;
												F_353508 += ((NI) 1);
											} LA122: ;
										} LA120: ;
									}
									fclose(f_353512);
								}
								{
									TY123809 LOC162;
									NimStringDesc* LOC163;
									if (!title_353506.keyword == 0) goto LA144;
									{
										NI i_353521;
										NI HEX3Atmp_353523;
										NI res_353525;
										i_353521 = 0;
										HEX3Atmp_353523 = 0;
										HEX3Atmp_353523 = (F_353508 - 1);
										res_353525 = ((NI) 0);
										{
											while (1) {
												if (!(res_353525 <= HEX3Atmp_353523)) goto LA148;
												i_353521 = res_353525;
												{
													NimStringDesc* toc_353527;
													NimStringDesc* LOC158;
													NimStringDesc* LOC159;
													NimStringDesc* LOC160;
													NimStringDesc* LOC161;
													toc_353527 = fileentries_353504->data[i_353521].linktitle;
													{
														NIM_BOOL LOC152;
														NIM_BOOL LOC153;
														LOC152 = 0;
														LOC153 = 0;
														LOC153 = !(toc_353527 == 0);
														if (!(LOC153)) goto LA154;
														LOC153 = (((NI) 0) < (toc_353527 ? toc_353527->Sup.len : 0));
														LA154: ;
														LOC152 = LOC153;
														if (!(LOC152)) goto LA155;
														LOC152 = ((NU8)(toc_353527->data[((NI) 0)]) == (NU8)(32));
														LA155: ;
														if (!LOC152) goto LA156;
														goto LA149;
													}
													LA156: ;
													(*Result).Field1 = (TY351507*) setLengthSeq(&((*Result).Field1)->Sup, sizeof(Indexentry348397), ((NI) ((NI)(L + ((NI) 1)))));
													LOC158 = 0;
													LOC158 = (*Result).Field1->data[L].keyword; (*Result).Field1->data[L].keyword = copyStringRC1(fileentries_353504->data[i_353521].keyword);
													if (LOC158) nimGCunrefNoCycle(LOC158);
													LOC159 = 0;
													LOC159 = (*Result).Field1->data[L].link; (*Result).Field1->data[L].link = copyStringRC1(fileentries_353504->data[i_353521].link);
													if (LOC159) nimGCunrefNoCycle(LOC159);
													LOC160 = 0;
													LOC160 = (*Result).Field1->data[L].linktitle; (*Result).Field1->data[L].linktitle = copyStringRC1(fileentries_353504->data[i_353521].linktitle);
													if (LOC160) nimGCunrefNoCycle(LOC160);
													LOC161 = 0;
													LOC161 = (*Result).Field1->data[L].linkdesc; (*Result).Field1->data[L].linkdesc = copyStringRC1(fileentries_353504->data[i_353521].linkdesc);
													if (LOC161) nimGCunrefNoCycle(LOC161);
													L += ((NI) 1);
												} LA149: ;
												res_353525 += ((NI) 1);
											} LA148: ;
										}
									}
									memset((void*)(&LOC162), 0, sizeof(LOC162));
									nossplitFile(path_351637, (&LOC162));
									(*Result).Field0 = (TY130408*) incrSeqV2(&((*Result).Field0)->Sup, sizeof(NimStringDesc*));
									LOC163 = 0;
									LOC163 = (*Result).Field0->data[(*Result).Field0->Sup.len]; (*Result).Field0->data[(*Result).Field0->Sup.len] = copyStringRC1(LOC162.Field1);
									if (LOC163) nimGCunrefNoCycle(LOC163);
									++(*Result).Field0->Sup.len;
								}
								goto LA142;
								LA144: ;
								{
									NimStringDesc* LOC165;
									NI LOC166;
									NimStringDesc* LOC167;
									LOC165 = 0;
									LOC166 = 0;
									LOC166 = len_351860((*Result).Field2);
									LOC167 = 0;
									LOC167 = nimIntToStr(LOC166);
									LOC165 = rawNewString(LOC167->Sup.len + 8);
appendString(LOC165, ((NimStringDesc*) &TMP5180));
appendString(LOC165, LOC167);
									title_353506.linktitle = LOC165;
									HEX5BHEX5DHEX3D_351872((&(*Result).Field2), (&title_353506), fileentries_353504);
								}
								LA142: ;
							}
							LA116: ;
						}
						LA17: ;
					} LA8: ;
				}
			} LA6: ;
			LOC168 = 0;
			LOC168 = closedir(d_353494);
		}
		LA4: ;
	}
	memset((void*)(&LOC169), 0, sizeof(LOC169));
	LOC169.ClPrc = ((TMP5183) (cmp_6577)); LOC169.ClEnv = NIM_NIL;
	sort_352098((*Result).Field0->data, (*Result).Field0->Sup.len, LOC169, ((NU8) 1));
}

static N_INLINE(NIM_BOOL, isfilled_170281)(NI hcode) {
	NIM_BOOL result;
	result = 0;
	result = !((hcode == ((NI) 0)));
	return result;
}

N_NIMCALL(void, HEX3CHEX2D_348815)(Indexentry348397* a, Indexentry348397* b) {
	unsureAsgnRef((void**) (&(*a).keyword), (*b).keyword);
	unsureAsgnRef((void**) (&(*a).link), (*b).link);
	{
		if (!(*b).linktitle == 0) goto LA3;
		unsureAsgnRef((void**) (&(*a).linktitle), copyString(NIM_NIL));
	}
	goto LA1;
	LA3: ;
	{
		unsureAsgnRef((void**) (&(*a).linktitle), (*b).linktitle);
	}
	LA1: ;
	{
		if (!(*b).linkdesc == 0) goto LA8;
		unsureAsgnRef((void**) (&(*a).linkdesc), copyString(NIM_NIL));
	}
	goto LA6;
	LA8: ;
	{
		unsureAsgnRef((void**) (&(*a).linkdesc), (*b).linkdesc);
	}
	LA6: ;
}

N_NIMCALL(NI, cmp_348436)(Indexentry348397* a, Indexentry348397* b) {
	NI result;
	result = 0;
	result = nsuCmpIgnoreStyle((*a).keyword, (*b).keyword);
	{
		if (!(result == ((NI) 0))) goto LA3;
		result = nsuCmpIgnoreStyle((*a).link, (*b).link);
	}
	LA3: ;
	return result;
}

N_NIMCALL(NimStringDesc*, generatedocumentationjumps_350796)(Table348410 docs) {
	NimStringDesc* result_350799;
	TY351507* titles;
	TY351507* result_350803;
	TY350027 LOC14;
	TY130408* chunks;
	NimStringDesc* LOC20;
	NimStringDesc* LOC21;
	result_350799 = 0;
	result_350799 = copyString(((NimStringDesc*) &TMP5184));
	result_350803 = (TY351507*) newSeq((&NTI351507), 0);
	{
		Indexentry348397 x_350807;
		memset((void*)(&x_350807), 0, sizeof(x_350807));
		{
			NI h_351395;
			NI HEX3Atmp_351397;
			NI res_351399;
			h_351395 = 0;
			HEX3Atmp_351397 = 0;
			HEX3Atmp_351397 = (docs.data ? (docs.data->Sup.len-1) : -1);
			res_351399 = ((NI) 0);
			{
				while (1) {
					if (!(res_351399 <= HEX3Atmp_351397)) goto LA4;
					h_351395 = res_351399;
					{
						NIM_BOOL LOC7;
						NimStringDesc* LOC10;
						NimStringDesc* LOC11;
						NimStringDesc* LOC12;
						NimStringDesc* LOC13;
						LOC7 = 0;
						LOC7 = isfilled_170281(docs.data->data[h_351395].Field0);
						if (!LOC7) goto LA8;
						x_350807.keyword = docs.data->data[h_351395].Field1.keyword;
						x_350807.link = docs.data->data[h_351395].Field1.link;
						x_350807.linktitle = docs.data->data[h_351395].Field1.linktitle;
						x_350807.linkdesc = docs.data->data[h_351395].Field1.linkdesc;
						result_350803 = (TY351507*) incrSeqV2(&(result_350803)->Sup, sizeof(Indexentry348397));
						LOC10 = 0;
						LOC10 = result_350803->data[result_350803->Sup.len].keyword; result_350803->data[result_350803->Sup.len].keyword = copyStringRC1(x_350807.keyword);
						if (LOC10) nimGCunrefNoCycle(LOC10);
						LOC11 = 0;
						LOC11 = result_350803->data[result_350803->Sup.len].link; result_350803->data[result_350803->Sup.len].link = copyStringRC1(x_350807.link);
						if (LOC11) nimGCunrefNoCycle(LOC11);
						LOC12 = 0;
						LOC12 = result_350803->data[result_350803->Sup.len].linktitle; result_350803->data[result_350803->Sup.len].linktitle = copyStringRC1(x_350807.linktitle);
						if (LOC12) nimGCunrefNoCycle(LOC12);
						LOC13 = 0;
						LOC13 = result_350803->data[result_350803->Sup.len].linkdesc; result_350803->data[result_350803->Sup.len].linkdesc = copyStringRC1(x_350807.linkdesc);
						if (LOC13) nimGCunrefNoCycle(LOC13);
						++result_350803->Sup.len;
					}
					LA8: ;
					res_351399 += ((NI) 1);
				} LA4: ;
			}
		}
	}
	genericSeqAssign((&titles), result_350803, (&NTI351507));
	memset((void*)(&LOC14), 0, sizeof(LOC14));
	LOC14.ClPrc = ((TMP5187) (cmp_348436)); LOC14.ClEnv = NIM_NIL;
	sort_350020(titles->data, titles->Sup.len, LOC14, ((NU8) 1));
	chunks = (TY130408*) newSeq((&NTI130408), 0);
	{
		Indexentry348397 title_351377;
		NI i_351406;
		NI L_351408;
		memset((void*)(&title_351377), 0, sizeof(title_351377));
		i_351406 = ((NI) 0);
		L_351408 = (titles ? titles->Sup.len : 0);
		{
			while (1) {
				NimStringDesc* LOC18;
				NimStringDesc* LOC19;
				if (!(i_351406 < L_351408)) goto LA17;
				title_351377.keyword = titles->data[i_351406].keyword;
				title_351377.link = titles->data[i_351406].link;
				title_351377.linktitle = titles->data[i_351406].linktitle;
				title_351377.linkdesc = titles->data[i_351406].linkdesc;
				LOC18 = 0;
				LOC18 = rawNewString(title_351377.link->Sup.len + title_351377.keyword->Sup.len + 15);
appendString(LOC18, ((NimStringDesc*) &TMP5188));
appendString(LOC18, title_351377.link);
appendString(LOC18, ((NimStringDesc*) &TMP5189));
appendString(LOC18, title_351377.keyword);
appendString(LOC18, ((NimStringDesc*) &TMP5190));
				chunks = (TY130408*) incrSeqV2(&(chunks)->Sup, sizeof(NimStringDesc*));
				LOC19 = 0;
				LOC19 = chunks->data[chunks->Sup.len]; chunks->data[chunks->Sup.len] = copyStringRC1(LOC18);
				if (LOC19) nimGCunrefNoCycle(LOC19);
				++chunks->Sup.len;
				i_351406 += ((NI) 1);
			} LA17: ;
		}
	}
	LOC20 = 0;
	LOC21 = 0;
	LOC21 = nsuJoinSep(chunks->data, chunks->Sup.len, ((NimStringDesc*) &TMP5191));
	LOC20 = rawNewString(LOC21->Sup.len + 5);
appendString(LOC20, LOC21);
appendString(LOC20, ((NimStringDesc*) &TMP5192));
	result_350799 = resizeString(result_350799, LOC20->Sup.len + 0);
appendString(result_350799, LOC20);
	return result_350799;
}

N_NIMCALL(NimStringDesc*, generatemodulejumps_351436)(TY130408* modules) {
	NimStringDesc* result;
	TY130408* chunks;
	NimStringDesc* LOC6;
	NimStringDesc* LOC7;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP5194));
	chunks = (TY130408*) newSeq((&NTI130408), 0);
	{
		NimStringDesc* name_351468;
		NI i_351483;
		NI L_351485;
		name_351468 = 0;
		i_351483 = ((NI) 0);
		L_351485 = (modules ? modules->Sup.len : 0);
		{
			while (1) {
				NimStringDesc* LOC4;
				NimStringDesc* LOC5;
				if (!(i_351483 < L_351485)) goto LA3;
				name_351468 = modules->data[i_351483];
				LOC4 = 0;
				LOC4 = rawNewString(name_351468->Sup.len + name_351468->Sup.len + 20);
appendString(LOC4, ((NimStringDesc*) &TMP5188));
appendString(LOC4, name_351468);
appendString(LOC4, ((NimStringDesc*) &TMP5195));
appendString(LOC4, name_351468);
appendString(LOC4, ((NimStringDesc*) &TMP5190));
				chunks = (TY130408*) incrSeqV2(&(chunks)->Sup, sizeof(NimStringDesc*));
				LOC5 = 0;
				LOC5 = chunks->data[chunks->Sup.len]; chunks->data[chunks->Sup.len] = copyStringRC1(LOC4);
				if (LOC5) nimGCunrefNoCycle(LOC5);
				++chunks->Sup.len;
				i_351483 += ((NI) 1);
			} LA3: ;
		}
	}
	LOC6 = 0;
	LOC7 = 0;
	LOC7 = nsuJoinSep(chunks->data, chunks->Sup.len, ((NimStringDesc*) &TMP5191));
	LOC6 = rawNewString(LOC7->Sup.len + 5);
appendString(LOC6, LOC7);
appendString(LOC6, ((NimStringDesc*) &TMP5192));
	result = resizeString(result, LOC6->Sup.len + 0);
appendString(result, LOC6);
	return result;
}
N_NIMCALL(void, TMP5199)(void* p, NI op) {
	TY349074* a;
	NI LOC1;
	a = (TY349074*)p;
	LOC1 = 0;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1].Field1, op);
	}
}

static N_INLINE(NimStringDesc*, HEX5BHEX5D_90363)(NimStringDesc* s, Slice90370 x) {
	NimStringDesc* result;
	result = 0;
	result = copyStrLast(s, x.a, x.b);
	return result;
}

static N_INLINE(Slice90370, HEX2EHEX2E_105291)(NI a, NI b) {
	Slice90370 result;
	memset((void*)(&result), 0, sizeof(result));
	result.a = a;
	result.b = b;
	return result;
}

N_NIMCALL(void, striptoclevel_348989)(NimStringDesc* s, TY349075* Result) {
	Slice90370 LOC8;
	{
		NI c_349014;
		NI HEX3Atmp_349034;
		NI res_349037;
		c_349014 = 0;
		HEX3Atmp_349034 = 0;
		HEX3Atmp_349034 = ((s ? s->Sup.len : 0) - 1);
		res_349037 = ((NI) 0);
		{
			while (1) {
				if (!(res_349037 <= HEX3Atmp_349034)) goto LA3;
				c_349014 = res_349037;
				(*Result).Field0 = c_349014;
				{
					if (!!(((NU8)(s->data[c_349014]) == (NU8)(32)))) goto LA6;
					goto LA1;
				}
				LA6: ;
				res_349037 += ((NI) 1);
			} LA3: ;
		}
	} LA1: ;
	LOC8 = HEX2EHEX2E_105291((*Result).Field0, ((s ? s->Sup.len : 0) - 1));
	unsureAsgnRef((void**) (&(*Result).Field1), HEX5BHEX5D_90363(s, LOC8));
}

N_NIMCALL(NimStringDesc*, indenttolevel_349056)(NI* level, NI newlevel) {
	NimStringDesc* result;
{	result = 0;
	result = copyString(((NimStringDesc*) &TMP2204));
	{
		if (!((*level) == newlevel)) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	{
		if (!((*level) < newlevel)) goto LA7;
		result = nsuRepeatStr(((NimStringDesc*) &TMP5201), ((NI) ((NI)(newlevel - (*level)))));
	}
	goto LA5;
	LA7: ;
	{
		result = nsuRepeatStr(((NimStringDesc*) &TMP5202), ((NI) ((NI)((*level) - newlevel))));
	}
	LA5: ;
	(*level) = newlevel;
	}BeforeRet: ;
	return result;
}

N_NIMCALL(NimStringDesc*, generatedocumentationtoc_349068)(TY351507* entries) {
	NimStringDesc* result;
	NimStringDesc* titleref;
	TY349074* levels;
	NI L;
	NI level;
	NimStringDesc* LOC23;
	NimStringDesc* LOC24;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP2204));
	titleref = 0;
	levels = 0;
	L = ((NI) 0);
	level = ((NI) 1);
	levels = (TY349074*) newSeq((&NTI349074), ((NI) ((entries ? entries->Sup.len : 0))));
	{
		Indexentry348397 entry_349211;
		NI i_349406;
		NI L_349408;
		memset((void*)(&entry_349211), 0, sizeof(entry_349211));
		i_349406 = ((NI) 0);
		L_349408 = (entries ? entries->Sup.len : 0);
		{
			while (1) {
				NimStringDesc* LOC4;
				TY349075 LOC5;
				NI rawlevel;
				NimStringDesc* rawtext;
				if (!(i_349406 < L_349408)) goto LA3;
				entry_349211.keyword = entries->data[i_349406].keyword;
				entry_349211.link = entries->data[i_349406].link;
				entry_349211.linktitle = entries->data[i_349406].linktitle;
				entry_349211.linkdesc = entries->data[i_349406].linkdesc;
				LOC4 = 0;
				LOC4 = or_347713(entry_349211.linktitle, entry_349211.keyword);
				memset((void*)(&LOC5), 0, sizeof(LOC5));
				striptoclevel_348989(LOC4, (&LOC5));
				rawlevel = 0;
				rawlevel = LOC5.Field0;
				rawtext = 0;
				rawtext = LOC5.Field1;
				{
					NimStringDesc* LOC10;
					if (!(rawlevel < ((NI) 1))) goto LA8;
					levels->data[L].Field0 = (NI)(level + ((NI) 1));
					LOC10 = 0;
					LOC10 = levels->data[L].Field1; levels->data[L].Field1 = copyStringRC1(entry_349211.keyword);
					if (LOC10) nimGCunrefNoCycle(LOC10);
				}
				goto LA6;
				LA8: ;
				{
					NimStringDesc* LOC12;
					level = rawlevel;
					levels->data[L].Field0 = rawlevel;
					LOC12 = 0;
					LOC12 = levels->data[L].Field1; levels->data[L].Field1 = copyStringRC1(rawtext);
					if (LOC12) nimGCunrefNoCycle(LOC12);
				}
				LA6: ;
				L += ((NI) 1);
				i_349406 += ((NI) 1);
			} LA3: ;
		}
	}
	result = copyString(((NimStringDesc*) &TMP5200));
	level = ((NI) 1);
	L = ((NI) 0);
	{
		while (1) {
			NimStringDesc* link;
			if (!(L < (entries ? entries->Sup.len : 0))) goto LA14;
			link = entries->data[L].link;
			{
				NIM_BOOL LOC17;
				LOC17 = 0;
				LOC17 = isdocumentationtitle_348979(link);
				if (!LOC17) goto LA18;
				titleref = copyString(link);
			}
			goto LA15;
			LA18: ;
			{
				NimStringDesc* LOC21;
				NimStringDesc* LOC22;
				LOC21 = 0;
				LOC21 = indenttolevel_349056((&level), levels->data[L].Field0);
				result = resizeString(result, LOC21->Sup.len + 0);
appendString(result, LOC21);
				LOC22 = 0;
				LOC22 = rawNewString(link->Sup.len + levels->data[L].Field1->Sup.len + 20);
appendString(LOC22, ((NimStringDesc*) &TMP5203));
appendString(LOC22, link);
appendString(LOC22, ((NimStringDesc*) &TMP5189));
appendString(LOC22, levels->data[L].Field1);
appendString(LOC22, ((NimStringDesc*) &TMP5204));
				result = resizeString(result, LOC22->Sup.len + 0);
appendString(result, LOC22);
			}
			LA15: ;
			L += ((NI) 1);
		} LA14: ;
	}
	LOC23 = 0;
	LOC24 = 0;
	LOC24 = indenttolevel_349056((&level), ((NI) 1));
	LOC23 = rawNewString(LOC24->Sup.len + 6);
appendString(LOC23, LOC24);
appendString(LOC23, ((NimStringDesc*) &TMP5205));
	result = resizeString(result, LOC23->Sup.len + 0);
appendString(result, LOC23);
	return result;
}

N_NIMCALL(NimStringDesc*, generatedocumentationindex_349431)(Table348410 docs) {
	NimStringDesc* result_349434;
	TY351507* titles;
	TY351507* result_349438;
	TY350027 LOC14;
	result_349434 = 0;
	result_349434 = copyString(((NimStringDesc*) &TMP2204));
	result_349438 = (TY351507*) newSeq((&NTI351507), 0);
	{
		Indexentry348397 x_349442;
		memset((void*)(&x_349442), 0, sizeof(x_349442));
		{
			NI h_350756;
			NI HEX3Atmp_350758;
			NI res_350760;
			h_350756 = 0;
			HEX3Atmp_350758 = 0;
			HEX3Atmp_350758 = (docs.data ? (docs.data->Sup.len-1) : -1);
			res_350760 = ((NI) 0);
			{
				while (1) {
					if (!(res_350760 <= HEX3Atmp_350758)) goto LA4;
					h_350756 = res_350760;
					{
						NIM_BOOL LOC7;
						NimStringDesc* LOC10;
						NimStringDesc* LOC11;
						NimStringDesc* LOC12;
						NimStringDesc* LOC13;
						LOC7 = 0;
						LOC7 = isfilled_170281(docs.data->data[h_350756].Field0);
						if (!LOC7) goto LA8;
						x_349442.keyword = docs.data->data[h_350756].Field1.keyword;
						x_349442.link = docs.data->data[h_350756].Field1.link;
						x_349442.linktitle = docs.data->data[h_350756].Field1.linktitle;
						x_349442.linkdesc = docs.data->data[h_350756].Field1.linkdesc;
						result_349438 = (TY351507*) incrSeqV2(&(result_349438)->Sup, sizeof(Indexentry348397));
						LOC10 = 0;
						LOC10 = result_349438->data[result_349438->Sup.len].keyword; result_349438->data[result_349438->Sup.len].keyword = copyStringRC1(x_349442.keyword);
						if (LOC10) nimGCunrefNoCycle(LOC10);
						LOC11 = 0;
						LOC11 = result_349438->data[result_349438->Sup.len].link; result_349438->data[result_349438->Sup.len].link = copyStringRC1(x_349442.link);
						if (LOC11) nimGCunrefNoCycle(LOC11);
						LOC12 = 0;
						LOC12 = result_349438->data[result_349438->Sup.len].linktitle; result_349438->data[result_349438->Sup.len].linktitle = copyStringRC1(x_349442.linktitle);
						if (LOC12) nimGCunrefNoCycle(LOC12);
						LOC13 = 0;
						LOC13 = result_349438->data[result_349438->Sup.len].linkdesc; result_349438->data[result_349438->Sup.len].linkdesc = copyStringRC1(x_349442.linkdesc);
						if (LOC13) nimGCunrefNoCycle(LOC13);
						++result_349438->Sup.len;
					}
					LA8: ;
					res_350760 += ((NI) 1);
				} LA4: ;
			}
		}
	}
	genericSeqAssign((&titles), result_349438, (&NTI351507));
	memset((void*)(&LOC14), 0, sizeof(LOC14));
	LOC14.ClPrc = ((TMP5197) (cmp_348436)); LOC14.ClEnv = NIM_NIL;
	sort_350020(titles->data, titles->Sup.len, LOC14, ((NU8) 1));
	{
		Indexentry348397 title_350681;
		NI i_350766;
		NI L_350768;
		memset((void*)(&title_350681), 0, sizeof(title_350681));
		i_350766 = ((NI) 0);
		L_350768 = (titles ? titles->Sup.len : 0);
		{
			while (1) {
				NimStringDesc* toclist;
				TY351507* LOC18;
				NimStringDesc* LOC19;
				if (!(i_350766 < L_350768)) goto LA17;
				title_350681.keyword = titles->data[i_350766].keyword;
				title_350681.link = titles->data[i_350766].link;
				title_350681.linktitle = titles->data[i_350766].linktitle;
				title_350681.linkdesc = titles->data[i_350766].linkdesc;
				LOC18 = 0;
				LOC18 = getordefault_350683(docs, (&title_350681));
				toclist = generatedocumentationtoc_349068(LOC18);
				LOC19 = 0;
				LOC19 = rawNewString(title_350681.link->Sup.len + title_350681.keyword->Sup.len + toclist->Sup.len + 30);
appendString(LOC19, ((NimStringDesc*) &TMP5206));
appendString(LOC19, title_350681.link);
appendString(LOC19, ((NimStringDesc*) &TMP5189));
appendString(LOC19, title_350681.keyword);
appendString(LOC19, ((NimStringDesc*) &TMP5204));
appendString(LOC19, toclist);
appendString(LOC19, ((NimStringDesc*) &TMP5205));
				result_349434 = resizeString(result_349434, LOC19->Sup.len + 0);
appendString(result_349434, LOC19);
				i_350766 += ((NI) 1);
			} LA17: ;
		}
	}
	return result_349434;
}

N_NIMCALL(void, sortindex_348826)(Indexentry348397* a, NI aLen0) {
	NI n;
	NI h;
	n = aLen0;
	h = ((NI) 1);
	{
		while (1) {
			h = (NI)((NI)(((NI) 3) * h) + ((NI) 1));
			{
				if (!(n < h)) goto LA5;
				goto LA1;
			}
			LA5: ;
		}
	} LA1: ;
	{
		while (1) {
			h = (NI)(h / ((NI) 3));
			{
				NI i_348852;
				NI HEX3Atmp_348863;
				NI res_348866;
				i_348852 = 0;
				HEX3Atmp_348863 = 0;
				HEX3Atmp_348863 = (NI)(n - ((NI) 1));
				res_348866 = h;
				{
					while (1) {
						Indexentry348397 v;
						NI j;
						if (!(res_348866 <= HEX3Atmp_348863)) goto LA11;
						i_348852 = res_348866;
						memset((void*)(&v), 0, sizeof(v));
						HEX3CHEX2D_348815((&v), (&a[i_348852]));
						j = i_348852;
						{
							while (1) {
								NI LOC14;
								LOC14 = 0;
								LOC14 = cmp_348436((&a[(NI)(j - h)]), (&v));
								if (!(((NI) 0) <= LOC14)) goto LA13;
								HEX3CHEX2D_348815((&a[j]), (&a[(NI)(j - h)]));
								j = (NI)(j - h);
								{
									if (!(j < h)) goto LA17;
									goto LA12;
								}
								LA17: ;
							} LA13: ;
						} LA12: ;
						HEX3CHEX2D_348815((&a[j]), (&v));
						res_348866 += ((NI) 1);
					} LA11: ;
				}
			}
			{
				if (!(h == ((NI) 1))) goto LA21;
				goto LA7;
			}
			LA21: ;
		}
	} LA7: ;
}

N_NIMCALL(NimStringDesc*, generatesymbolindex_348903)(TY351507* symbols) {
	NimStringDesc* result;
	NI i;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP2204));
	i = ((NI) 0);
	{
		while (1) {
			NimStringDesc* keyword;
			NimStringDesc* cleanedkeyword;
			Slice90370 LOC3;
			TY193306 LOC4;
			NI j;
			if (!(i < (symbols ? symbols->Sup.len : 0))) goto LA2;
			keyword = symbols->data[i].keyword;
			LOC3 = HEX2EHEX2E_105291(((NI) 1), (NI)((keyword ? (keyword->Sup.len-1) : -1) - ((NI) 1)));
			cleanedkeyword = HEX5BHEX5D_90363(keyword, LOC3);
			memset((void*)LOC4, 0, sizeof(LOC4));
			LOC4[0] = copyString(keyword);
			LOC4[1] = copyString(cleanedkeyword);
			nsuAddf((&result), ((NimStringDesc*) &TMP5208), LOC4, 2);
			j = i;
			{
				while (1) {
					NIM_BOOL LOC7;
					NimStringDesc* url;
					NimStringDesc* text;
					NimStringDesc* desc;
					LOC7 = 0;
					LOC7 = (j < (symbols ? symbols->Sup.len : 0));
					if (!(LOC7)) goto LA8;
					LOC7 = eqStrings(keyword, symbols->data[j].keyword);
					LA8: ;
					if (!LOC7) goto LA6;
					url = symbols->data[j].link;
					{
						if (!!(symbols->data[j].linktitle == 0)) goto LA11;
						text = symbols->data[j].linktitle;
					}
					goto LA9;
					LA11: ;
					{
						text = url;
					}
					LA9: ;
					{
						if (!!(symbols->data[j].linkdesc == 0)) goto LA16;
						desc = symbols->data[j].linkdesc;
					}
					goto LA14;
					LA16: ;
					{
						desc = copyString(((NimStringDesc*) &TMP2204));
					}
					LA14: ;
					{
						TY193293 LOC23;
						if (!(((NI) 0) < (desc ? desc->Sup.len : 0))) goto LA21;
						memset((void*)LOC23, 0, sizeof(LOC23));
						LOC23[0] = copyString(url);
						LOC23[1] = copyString(text);
						LOC23[2] = copyString(desc);
						nsuAddf((&result), ((NimStringDesc*) &TMP5209), LOC23, 3);
					}
					goto LA19;
					LA21: ;
					{
						TY193306 LOC25;
						memset((void*)LOC25, 0, sizeof(LOC25));
						LOC25[0] = copyString(url);
						LOC25[1] = copyString(text);
						nsuAddf((&result), ((NimStringDesc*) &TMP5210), LOC25, 2);
					}
					LA19: ;
					j += ((NI) 1);
				} LA6: ;
			}
			result = resizeString(result, 11);
appendString(result, ((NimStringDesc*) &TMP5211));
			i = j;
		} LA2: ;
	}
	return result;
}

N_NIMCALL(NimStringDesc*, mergeindexes_353594)(NimStringDesc* dir) {
	NimStringDesc* result;
	TY351504 LOC1;
	TY130408* modules;
	TY351507* symbols;
	Table348410 docs;
	result = 0;
	memset((void*)(&LOC1), 0, sizeof(LOC1));
	readindexdir_351501(dir, (&LOC1));
	modules = 0;
	genericSeqAssign((&modules), LOC1.Field0, (&NTI130408));
	symbols = 0;
	genericSeqAssign((&symbols), LOC1.Field1, (&NTI351507));
	memset((void*)(&docs), 0, sizeof(docs));
	genericSeqAssign((&docs.data), LOC1.Field2.data, (&NTI348413));
	docs.counter = LOC1.Field2.counter;
	result = copyString(((NimStringDesc*) &TMP2204));
	{
		NI LOC4;
		NimStringDesc* LOC7;
		LOC4 = 0;
		LOC4 = len_351860(docs);
		if (!(((NI) 0) < LOC4)) goto LA5;
		LOC7 = 0;
		LOC7 = generatedocumentationjumps_350796(docs);
		result = resizeString(result, LOC7->Sup.len + 0);
appendString(result, LOC7);
		result = resizeString(result, 5);
appendString(result, ((NimStringDesc*) &TMP5193));
	}
	LA5: ;
	{
		NimStringDesc* LOC12;
		if (!(((NI) 0) < (modules ? modules->Sup.len : 0))) goto LA10;
		LOC12 = 0;
		LOC12 = generatemodulejumps_351436(modules);
		result = resizeString(result, LOC12->Sup.len + 0);
appendString(result, LOC12);
		result = resizeString(result, 5);
appendString(result, ((NimStringDesc*) &TMP5193));
	}
	LA10: ;
	{
		NI LOC15;
		NimStringDesc* LOC18;
		LOC15 = 0;
		LOC15 = len_351860(docs);
		if (!(((NI) 0) < LOC15)) goto LA16;
		result = resizeString(result, 29);
appendString(result, ((NimStringDesc*) &TMP5196));
		LOC18 = 0;
		LOC18 = generatedocumentationindex_349431(docs);
		result = resizeString(result, LOC18->Sup.len + 0);
appendString(result, LOC18);
	}
	LA16: ;
	{
		NimStringDesc* LOC23;
		if (!(((NI) 0) < (symbols ? symbols->Sup.len : 0))) goto LA21;
		sortindex_348826(symbols->data, symbols->Sup.len);
		result = resizeString(result, 21);
appendString(result, ((NimStringDesc*) &TMP5207));
		LOC23 = 0;
		LOC23 = generatesymbolindex_348903(symbols);
		result = resizeString(result, LOC23->Sup.len + 0);
appendString(result, LOC23);
	}
	LA21: ;
	return result;
}
NIM_EXTERNC N_NOINLINE(void, docutils_rstgenInit000)(void) {
	NimStringDesc* LOC1;
	LOC1 = 0;
	LOC1 = splitter_347489; splitter_347489 = copyStringRC1(((NimStringDesc*) &TMP979));
	if (LOC1) nimGCunrefNoCycle(LOC1);
}

NIM_EXTERNC N_NOINLINE(void, docutils_rstgenDatInit000)(void) {
static TNimNode* TMP5013[14];
static TNimNode* TMP5014[2];
NI TMP5016;
static char* NIM_CONST TMP5015[2] = {
"outHtml", 
"outLatex"};
static TNimNode* TMP5017[3];
static TNimNode* TMP5174[4];
static TNimNode* TMP5198[2];
static TNimNode TMP971[30];
NTI347016.size = sizeof(Rstgenerator347016);
NTI347016.kind = 17;
NTI347016.base = (&NTI4011);
TMP5013[0] = &TMP971[1];
NTI347010.size = sizeof(NU8);
NTI347010.kind = 14;
NTI347010.base = 0;
NTI347010.flags = 3;
for (TMP5016 = 0; TMP5016 < 2; TMP5016++) {
TMP971[TMP5016+2].kind = 1;
TMP971[TMP5016+2].offset = TMP5016;
TMP971[TMP5016+2].name = TMP5015[TMP5016];
TMP5014[TMP5016] = &TMP971[TMP5016+2];
}
TMP971[4].len = 2; TMP971[4].kind = 2; TMP971[4].sons = &TMP5014[0];
NTI347010.node = &TMP971[4];
TMP971[1].kind = 1;
TMP971[1].offset = offsetof(Rstgenerator347016, target);
TMP971[1].typ = (&NTI347010);
TMP971[1].name = "target";
TMP5013[1] = &TMP971[5];
TMP971[5].kind = 1;
TMP971[5].offset = offsetof(Rstgenerator347016, config);
TMP971[5].typ = (&NTI145214);
TMP971[5].name = "config";
TMP5013[2] = &TMP971[6];
TMP971[6].kind = 1;
TMP971[6].offset = offsetof(Rstgenerator347016, splitafter);
TMP971[6].typ = (&NTI108);
TMP971[6].name = "splitAfter";
TMP5013[3] = &TMP971[7];
TMP971[7].kind = 1;
TMP971[7].offset = offsetof(Rstgenerator347016, listingcounter);
TMP971[7].typ = (&NTI108);
TMP971[7].name = "listingCounter";
TMP5013[4] = &TMP971[8];
NTI347012.size = sizeof(Tocentry347012);
NTI347012.kind = 18;
NTI347012.base = 0;
NTI347012.flags = 2;
TMP5017[0] = &TMP971[10];
TMP971[10].kind = 1;
TMP971[10].offset = offsetof(Tocentry347012, n);
TMP971[10].typ = (&NTI332007);
TMP971[10].name = "n";
TMP5017[1] = &TMP971[11];
TMP971[11].kind = 1;
TMP971[11].offset = offsetof(Tocentry347012, refname);
TMP971[11].typ = (&NTI149);
TMP971[11].name = "refname";
TMP5017[2] = &TMP971[12];
TMP971[12].kind = 1;
TMP971[12].offset = offsetof(Tocentry347012, header);
TMP971[12].typ = (&NTI149);
TMP971[12].name = "header";
TMP971[9].len = 3; TMP971[9].kind = 2; TMP971[9].sons = &TMP5017[0];
NTI347012.node = &TMP971[9];
NTI347035.size = sizeof(TY347035*);
NTI347035.kind = 24;
NTI347035.base = (&NTI347012);
NTI347035.flags = 2;
NTI347035.marker = TMP5018;
TMP971[8].kind = 1;
TMP971[8].offset = offsetof(Rstgenerator347016, tocpart);
TMP971[8].typ = (&NTI347035);
TMP971[8].name = "tocPart";
TMP5013[5] = &TMP971[13];
TMP971[13].kind = 1;
TMP971[13].offset = offsetof(Rstgenerator347016, hastoc);
TMP971[13].typ = (&NTI138);
TMP971[13].name = "hasToc";
TMP5013[6] = &TMP971[14];
TMP971[14].kind = 1;
TMP971[14].offset = offsetof(Rstgenerator347016, theindex);
TMP971[14].typ = (&NTI149);
TMP971[14].name = "theIndex";
TMP5013[7] = &TMP971[15];
TMP971[15].kind = 1;
TMP971[15].offset = offsetof(Rstgenerator347016, options);
TMP971[15].typ = (&NTI333015);
TMP971[15].name = "options";
TMP5013[8] = &TMP971[16];
TMP971[16].kind = 1;
TMP971[16].offset = offsetof(Rstgenerator347016, findfile);
TMP971[16].typ = (&NTI333023);
TMP971[16].name = "findFile";
TMP5013[9] = &TMP971[17];
TMP971[17].kind = 1;
TMP971[17].offset = offsetof(Rstgenerator347016, msghandler);
TMP971[17].typ = (&NTI333021);
TMP971[17].name = "msgHandler";
TMP5013[10] = &TMP971[18];
TMP971[18].kind = 1;
TMP971[18].offset = offsetof(Rstgenerator347016, filename);
TMP971[18].typ = (&NTI149);
TMP971[18].name = "filename";
TMP5013[11] = &TMP971[19];
NTI347045.size = sizeof(TY347045);
NTI347045.kind = 16;
NTI347045.base = (&NTI149);
NTI347045.flags = 2;
TMP971[19].kind = 1;
TMP971[19].offset = offsetof(Rstgenerator347016, meta);
TMP971[19].typ = (&NTI347045);
TMP971[19].name = "meta";
TMP5013[12] = &TMP971[20];
TMP971[20].kind = 1;
TMP971[20].offset = offsetof(Rstgenerator347016, currentsection);
TMP971[20].typ = (&NTI149);
TMP971[20].name = "currentSection";
TMP5013[13] = &TMP971[21];
TMP971[21].kind = 1;
TMP971[21].offset = offsetof(Rstgenerator347016, seenindexterms);
TMP971[21].typ = (&NTI347053);
TMP971[21].name = "seenIndexTerms";
TMP971[0].len = 14; TMP971[0].kind = 2; TMP971[0].sons = &TMP5013[0];
NTI347016.node = &TMP971[0];
NTI348397.size = sizeof(Indexentry348397);
NTI348397.kind = 18;
NTI348397.base = 0;
NTI348397.flags = 2;
TMP5174[0] = &TMP971[23];
TMP971[23].kind = 1;
TMP971[23].offset = offsetof(Indexentry348397, keyword);
TMP971[23].typ = (&NTI149);
TMP971[23].name = "keyword";
TMP5174[1] = &TMP971[24];
TMP971[24].kind = 1;
TMP971[24].offset = offsetof(Indexentry348397, link);
TMP971[24].typ = (&NTI149);
TMP971[24].name = "link";
TMP5174[2] = &TMP971[25];
TMP971[25].kind = 1;
TMP971[25].offset = offsetof(Indexentry348397, linktitle);
TMP971[25].typ = (&NTI149);
TMP971[25].name = "linkTitle";
TMP5174[3] = &TMP971[26];
TMP971[26].kind = 1;
TMP971[26].offset = offsetof(Indexentry348397, linkdesc);
TMP971[26].typ = (&NTI149);
TMP971[26].name = "linkDesc";
TMP971[22].len = 4; TMP971[22].kind = 2; TMP971[22].sons = &TMP5174[0];
NTI348397.node = &TMP971[22];
NTI351507.size = sizeof(TY351507*);
NTI351507.kind = 24;
NTI351507.base = (&NTI348397);
NTI351507.flags = 2;
NTI351507.marker = TMP5175;
NTI349075.size = sizeof(TY349075);
NTI349075.kind = 18;
NTI349075.base = 0;
NTI349075.flags = 2;
TMP5198[0] = &TMP971[28];
TMP971[28].kind = 1;
TMP971[28].offset = offsetof(TY349075, Field0);
TMP971[28].typ = (&NTI108);
TMP971[28].name = "Field0";
TMP5198[1] = &TMP971[29];
TMP971[29].kind = 1;
TMP971[29].offset = offsetof(TY349075, Field1);
TMP971[29].typ = (&NTI149);
TMP971[29].name = "Field1";
TMP971[27].len = 2; TMP971[27].kind = 2; TMP971[27].sons = &TMP5198[0];
NTI349075.node = &TMP971[27];
NTI349074.size = sizeof(TY349074*);
NTI349074.kind = 24;
NTI349074.base = (&NTI349075);
NTI349074.flags = 2;
NTI349074.marker = TMP5199;
}

