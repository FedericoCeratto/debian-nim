/* Generated by Nim Compiler v0.13.0 */
/*   (c) 2015 Andreas Rumpf */
/* The generated code is subject to the original license. */
/* Compiled for: Linux, amd64, gcc */
/* Command for C compiler:
   gcc -c  -w -O3 -fno-strict-aliasing  -I/home/ubuntu/nim-ci/Nim/lib -o /home/ubuntu/nim-ci/Nim/compiler/rnimcache/stdlib_marshal.o /home/ubuntu/nim-ci/Nim/compiler/rnimcache/stdlib_marshal.c */
#define NIM_INTBITS 64

#include "nimbase.h"
#include <string.h>
typedef struct Streamobj156818 Streamobj156818;
typedef struct Debuginfo204010 Debuginfo204010;
typedef struct Intset269031 Intset269031;
typedef struct Trunk269027 Trunk269027;
typedef struct Trunkseq269029 Trunkseq269029;
typedef struct TY204022 TY204022;
typedef struct TY204024 TY204024;
typedef struct Any206100 Any206100;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY210201 TY210201;
typedef struct TY210202 TY210202;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TNimObject TNimObject;
typedef struct Filenamemapping204006 Filenamemapping204006;
typedef struct Enumdesc204008 Enumdesc204008;
typedef struct TY204018 TY204018;
typedef struct TY204019 TY204019;
struct  Intset269031  {
NI counter;
NI max;
Trunk269027* head;
Trunkseq269029* data;
};
struct  Debuginfo204010  {
NI version;
TY204022* files;
TY204024* enums;
NIM_BOOL conflicts;
};
struct  Any206100  {
void* value;
void* rawtypeptr;
};
typedef N_NIMCALL_PTR(void, TY206088) (void* p, NI op);
typedef N_NIMCALL_PTR(void*, TY206093) (void* p);
struct  TGenericSeq  {
NI len;
NI reserved;
};
struct  NimStringDesc  {
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];
};
struct TY210202 {
NCSTRING Field0;
Any206100 Field1;
};
typedef N_NIMCALL_PTR(void, TY3489) (void* p, NI op);
typedef N_NIMCALL_PTR(void*, TY3494) (void* p);
struct  TNimType  {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
TY3489 marker;
TY3494 deepcopy;
};
struct  TNimNode  {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct  TNimObject  {
TNimType* m_type;
};
typedef N_NIMCALL_PTR(void, TY156819) (Streamobj156818* s);
typedef N_NIMCALL_PTR(NIM_BOOL, TY156823) (Streamobj156818* s);
typedef N_NIMCALL_PTR(void, TY156827) (Streamobj156818* s, NI pos);
typedef N_NIMCALL_PTR(NI, TY156832) (Streamobj156818* s);
typedef N_NIMCALL_PTR(NI, TY156836) (Streamobj156818* s, void* buffer, NI buflen);
typedef N_NIMCALL_PTR(NI, TY156842) (Streamobj156818* s, void* buffer, NI buflen);
typedef N_NIMCALL_PTR(void, TY156848) (Streamobj156818* s, void* buffer, NI buflen);
typedef N_NIMCALL_PTR(void, TY156854) (Streamobj156818* s);
struct  Streamobj156818  {
  TNimObject Sup;
TY156819 closeimpl;
TY156823 atendimpl;
TY156827 setpositionimpl;
TY156832 getpositionimpl;
TY156836 readdataimpl;
TY156842 peekdataimpl;
TY156848 writedataimpl;
TY156854 flushimpl;
};
typedef NI TY29419[8];
struct  Trunk269027  {
Trunk269027* next;
NI key;
TY29419 bits;
};
struct  Filenamemapping204006  {
NimStringDesc* package;
NimStringDesc* file;
NU32 mangled;
};
struct  Enumdesc204008  {
NI size;
NU32 owner;
NI id;
NimStringDesc* name;
TY204018* values;
};
struct TY204019 {
NimStringDesc* Field0;
NI Field1;
};
struct TY210201 {
  TGenericSeq Sup;
  TY210202 data[SEQ_DECL_SIZE];
};
struct Trunkseq269029 {
  TGenericSeq Sup;
  Trunk269027* data[SEQ_DECL_SIZE];
};
struct TY204022 {
  TGenericSeq Sup;
  Filenamemapping204006 data[SEQ_DECL_SIZE];
};
struct TY204024 {
  TGenericSeq Sup;
  Enumdesc204008 data[SEQ_DECL_SIZE];
};
struct TY204018 {
  TGenericSeq Sup;
  TY204019 data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, initintset_269885)(Intset269031* Result);
N_NOINLINE(void, chckNil)(void* p);
N_NIMCALL(void, storeany_271006)(Streamobj156818* s, Any206100 a, Intset269031* stored);
static N_INLINE(NU8, kind_207009)(Any206100 x);
N_NIMCALL(void, write_156969)(Streamobj156818* s, NimStringDesc* x);
N_NIMCALL(NIM_BOOL, getbool_215604)(Any206100 x);
N_NIMCALL(NimStringDesc*, nimBoolToStr)(NIM_BOOL x);
N_NIMCALL(NIM_CHAR, getchar_215412)(Any206100 x);
N_NIMCALL(NimStringDesc*, escapejson_266743)(NimStringDesc* s);
N_NIMCALL(NimStringDesc*, nimCharToStr)(NIM_CHAR x);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI x);
N_NIMCALL(NIM_BOOL, isnil_208812)(Any206100 x);
N_NIMCALL(NI, len_208616)(Any206100 x);
N_NIMCALL(Any206100, HEX5BHEX5D_207815)(Any206100 x, NI i);
N_NIMCALL(void*, newSeq)(TNimType* typ, NI len);
N_NIMCALL(void, fieldsaux_209402)(void* p, TNimNode* n, TY210201** ret);
N_NIMCALL(NimStringDesc*, cstrToNimstr)(NCSTRING str);
N_NIMCALL(Any206100, skiprange_215804)(Any206100 x);
N_NIMCALL(NimStringDesc*, getenumfield_216442)(Any206100 x);
N_NIMCALL(void*, getpointer_209002)(Any206100 x);
N_NIMCALL(NIM_BOOL, containsorincl_269862)(Intset269031* s, NI key);
static N_INLINE(NI, ptrtoint_271001)(void* x);
N_NIMCALL(Any206100, HEX5BHEX5D_211656)(Any206100 x);
N_NIMCALL(NimStringDesc*, getstring_217406)(Any206100 x);
N_NIMCALL(NI, validateutf8_223774)(NimStringDesc* s);
N_NIMCALL(NI64, getbiggestint_213203)(Any206100 x);
N_NIMCALL(NimStringDesc*, nimInt64ToStr)(NI64 x);
N_NIMCALL(NF, getbiggestfloat_217003)(Any206100 x);
N_NIMCALL(NimStringDesc*, nimFloatToStr)(NF f);
static N_INLINE(Any206100, toany_273018)(Debuginfo204010* x);
static N_INLINE(Any206100, newany_206836)(void* value, TNimType* rawtype);
STRING_LITERAL(TMP4738, "null", 4);
STRING_LITERAL(TMP4739, "[", 1);
STRING_LITERAL(TMP4740, ", ", 2);
STRING_LITERAL(TMP4743, "]", 1);
STRING_LITERAL(TMP4744, "{", 1);
STRING_LITERAL(TMP4748, ": ", 2);
STRING_LITERAL(TMP4749, "}", 1);
extern TNimType NTI210201; /* seq[tuple[name: cstring, any: Any]] */
extern TNimType NTI204010; /* DebugInfo */

static N_INLINE(NU8, kind_207009)(Any206100 x) {
	NU8 result;
	result = 0;
	result = ((NU8) ((*((TNimType*) (x.rawtypeptr))).kind));
	return result;
}

static N_INLINE(NI, ptrtoint_271001)(void* x) {
	NI result;
	result = 0;
	result = ((NI) (x));
	return result;
}

N_NIMCALL(void, storeany_271006)(Streamobj156818* s, Any206100 a, Intset269031* stored) {
	NU8 LOC1;
	LOC1 = 0;
	LOC1 = kind_207009(a);
	switch (LOC1) {
	case ((NU8) 0):
	{
	}
	break;
	case ((NU8) 1):
	{
		NIM_BOOL LOC4;
		NimStringDesc* LOC5;
		LOC4 = 0;
		LOC4 = getbool_215604(a);
		LOC5 = 0;
		LOC5 = nimBoolToStr(LOC4);
		write_156969(s, LOC5);
	}
	break;
	case ((NU8) 2):
	{
		NIM_CHAR ch;
		ch = getchar_215412(a);
		{
			NimStringDesc* LOC11;
			NimStringDesc* LOC12;
			if (!((NU8)(ch) < (NU8)(128))) goto LA9;
			LOC11 = 0;
			LOC11 = nimCharToStr(ch);
			LOC12 = 0;
			LOC12 = escapejson_266743(LOC11);
			write_156969(s, LOC12);
		}
		goto LA7;
		LA9: ;
		{
			NimStringDesc* LOC14;
			LOC14 = 0;
			LOC14 = nimIntToStr(((NI) (((NU8)(ch)))));
			write_156969(s, LOC14);
		}
		LA7: ;
	}
	break;
	case ((NU8) 16):
	case ((NU8) 24):
	{
		{
			NIM_BOOL LOC18;
			NU8 LOC19;
			LOC18 = 0;
			LOC19 = 0;
			LOC19 = kind_207009(a);
			LOC18 = (LOC19 == ((NU8) 24));
			if (!(LOC18)) goto LA20;
			LOC18 = isnil_208812(a);
			LA20: ;
			if (!LOC18) goto LA21;
			write_156969(s, ((NimStringDesc*) &TMP4738));
		}
		goto LA16;
		LA21: ;
		{
			write_156969(s, ((NimStringDesc*) &TMP4739));
			{
				NI i_271220;
				NI HEX3Atmp_271268;
				NI LOC25;
				NI res_271271;
				i_271220 = 0;
				HEX3Atmp_271268 = 0;
				LOC25 = 0;
				LOC25 = len_208616(a);
				HEX3Atmp_271268 = (NI)(LOC25 - ((NI) 1));
				res_271271 = ((NI) 0);
				{
					while (1) {
						Any206100 LOC32;
						if (!(res_271271 <= HEX3Atmp_271268)) goto LA27;
						i_271220 = res_271271;
						{
							if (!(((NI) 0) < i_271220)) goto LA30;
							write_156969(s, ((NimStringDesc*) &TMP4740));
						}
						LA30: ;
						LOC32 = HEX5BHEX5D_207815(a, i_271220);
						storeany_271006(s, LOC32, stored);
						res_271271 += ((NI) 1);
					} LA27: ;
				}
			}
			write_156969(s, ((NimStringDesc*) &TMP4743));
		}
		LA16: ;
	}
	break;
	case ((NU8) 17):
	case ((NU8) 18):
	{
		NI i;
		write_156969(s, ((NimStringDesc*) &TMP4744));
		i = ((NI) 0);
		{
			NimStringDesc* key_271222;
			Any206100 val_271223;
			void* p_271280;
			TNimType* t_271282;
			TY210201* ret_271285;
			key_271222 = 0;
			memset((void*)(&val_271223), 0, sizeof(val_271223));
			p_271280 = a.value;
			t_271282 = ((TNimType*) (a.rawtypeptr));
			ret_271285 = (TY210201*) newSeq((&NTI210201), 0);
			{
				if (!((*t_271282).kind == ((NU8) 17))) goto LA37;
				{
					while (1) {
						fieldsaux_209402(p_271280, (*t_271282).node, (&ret_271285));
						t_271282 = (*t_271282).base;
						{
							if (!t_271282 == 0) goto LA43;
							goto LA39;
						}
						LA43: ;
					}
				} LA39: ;
			}
			goto LA35;
			LA37: ;
			{
				fieldsaux_209402(p_271280, (*t_271282).node, (&ret_271285));
			}
			LA35: ;
			{
				NCSTRING name_271287;
				Any206100 any_271289;
				NI i_271291;
				NI L_271293;
				name_271287 = 0;
				memset((void*)(&any_271289), 0, sizeof(any_271289));
				i_271291 = ((NI) 0);
				L_271293 = (ret_271285 ? ret_271285->Sup.len : 0);
				{
					while (1) {
						NimStringDesc* LOC53;
						if (!(i_271291 < L_271293)) goto LA48;
						name_271287 = ret_271285->data[i_271291].Field0;
						any_271289 = ret_271285->data[i_271291].Field1;
						key_271222 = cstrToNimstr(name_271287);
						val_271223 = any_271289;
						{
							if (!(((NI) 0) < i)) goto LA51;
							write_156969(s, ((NimStringDesc*) &TMP4740));
						}
						LA51: ;
						LOC53 = 0;
						LOC53 = escapejson_266743(key_271222);
						write_156969(s, LOC53);
						write_156969(s, ((NimStringDesc*) &TMP4748));
						storeany_271006(s, val_271223, stored);
						i += ((NI) 1);
						i_271291 += ((NI) 1);
					} LA48: ;
				}
			}
		}
		write_156969(s, ((NimStringDesc*) &TMP4749));
	}
	break;
	case ((NU8) 19):
	{
		NI i;
		write_156969(s, ((NimStringDesc*) &TMP4739));
		i = ((NI) 0);
		{
			NI e_271234;
			TNimType* typ_271300;
			void* p_271303;
			NI64 u_271305;
			e_271234 = 0;
			typ_271300 = ((TNimType*) (a.rawtypeptr));
			p_271303 = a.value;
			u_271305 = 0;
			switch ((*typ_271300).size) {
			case ((NI) 1):
			{
				u_271305 = ((NI64)(NU64)(NU8)((*((NI8*) (p_271303)))));
			}
			break;
			case ((NI) 2):
			{
				u_271305 = ((NI64)(NU64)(NU16)((*((NI16*) (p_271303)))));
			}
			break;
			case ((NI) 4):
			{
				u_271305 = ((NI64)(NU64)(NU32)((*((NI32*) (p_271303)))));
			}
			break;
			case ((NI) 8):
			{
				u_271305 = (*((NI64*) (p_271303)));
			}
			break;
			default:
			{
				NI8* a_271311;
				a_271311 = ((NI8*) (p_271303));
				{
					NI i_271314;
					NI HEX3Atmp_271316;
					NI res_271318;
					i_271314 = 0;
					HEX3Atmp_271316 = 0;
					HEX3Atmp_271316 = (NI)((NI)((*typ_271300).size * ((NI) 8)) - ((NI) 1));
					res_271318 = ((NI) 0);
					{
						while (1) {
							if (!(res_271318 <= HEX3Atmp_271316)) goto LA63;
							i_271314 = res_271318;
							{
								NimStringDesc* LOC72;
								if (!!(((NI)(((NI)(NU)(NU8)(a_271311[((NI)(i_271314 / ((NI) 8)))- 0])) & (NI)((NU64)(((NI) 1)) << (NU64)(((NI) ((NI)(i_271314 % ((NI) 8))))))) == ((NI) 0)))) goto LA66;
								e_271234 = (NI)(i_271314 + (*(*typ_271300).node).len);
								{
									if (!(((NI) 0) < i)) goto LA70;
									write_156969(s, ((NimStringDesc*) &TMP4740));
								}
								LA70: ;
								LOC72 = 0;
								LOC72 = nimIntToStr(e_271234);
								write_156969(s, LOC72);
								i += ((NI) 1);
							}
							LA66: ;
							res_271318 += ((NI) 1);
						} LA63: ;
					}
				}
			}
			break;
			}
			{
				if (!((*typ_271300).size <= ((NI) 8))) goto LA75;
				{
					NI i_271322;
					NI res_271324;
					i_271322 = 0;
					res_271324 = ((NI) 0);
					{
						while (1) {
							if (!(res_271324 <= ((NI) 63))) goto LA79;
							i_271322 = res_271324;
							{
								NimStringDesc* LOC88;
								if (!!(((NI64)(u_271305 & (NI64)((NU64)(IL64(1)) << (NU64)(((NI64) (i_271322))))) == IL64(0)))) goto LA82;
								e_271234 = (NI)(i_271322 + (*(*typ_271300).node).len);
								{
									if (!(((NI) 0) < i)) goto LA86;
									write_156969(s, ((NimStringDesc*) &TMP4740));
								}
								LA86: ;
								LOC88 = 0;
								LOC88 = nimIntToStr(e_271234);
								write_156969(s, LOC88);
								i += ((NI) 1);
							}
							LA82: ;
							res_271324 += ((NI) 1);
						} LA79: ;
					}
				}
			}
			LA75: ;
		}
		write_156969(s, ((NimStringDesc*) &TMP4743));
	}
	break;
	case ((NU8) 20):
	{
		Any206100 LOC90;
		LOC90 = skiprange_215804(a);
		storeany_271006(s, LOC90, stored);
	}
	break;
	case ((NU8) 14):
	{
		NimStringDesc* LOC92;
		NimStringDesc* LOC93;
		LOC92 = 0;
		LOC92 = getenumfield_216442(a);
		LOC93 = 0;
		LOC93 = escapejson_266743(LOC92);
		write_156969(s, LOC93);
	}
	break;
	case ((NU8) 21):
	case ((NU8) 22):
	{
		void* x;
		x = getpointer_209002(a);
		{
			if (!x == 0) goto LA97;
			write_156969(s, ((NimStringDesc*) &TMP4738));
		}
		goto LA95;
		LA97: ;
		{
			NI LOC100;
			NIM_BOOL LOC101;
			NI LOC104;
			NimStringDesc* LOC105;
			LOC100 = 0;
			LOC100 = ptrtoint_271001(x);
			LOC101 = 0;
			LOC101 = containsorincl_269862(stored, LOC100);
			if (!LOC101) goto LA102;
			LOC104 = 0;
			LOC104 = ptrtoint_271001(x);
			LOC105 = 0;
			LOC105 = nimIntToStr(LOC104);
			write_156969(s, LOC105);
		}
		goto LA95;
		LA102: ;
		{
			NI LOC107;
			NimStringDesc* LOC108;
			Any206100 LOC109;
			write_156969(s, ((NimStringDesc*) &TMP4739));
			LOC107 = 0;
			LOC107 = ptrtoint_271001(x);
			LOC108 = 0;
			LOC108 = nimIntToStr(LOC107);
			write_156969(s, LOC108);
			write_156969(s, ((NimStringDesc*) &TMP4740));
			LOC109 = HEX5BHEX5D_211656(a);
			storeany_271006(s, LOC109, stored);
			write_156969(s, ((NimStringDesc*) &TMP4743));
		}
		LA95: ;
	}
	break;
	case ((NU8) 25):
	case ((NU8) 26):
	case ((NU8) 29):
	{
		void* LOC111;
		NI LOC112;
		NimStringDesc* LOC113;
		LOC111 = 0;
		LOC111 = getpointer_209002(a);
		LOC112 = 0;
		LOC112 = ptrtoint_271001(LOC111);
		LOC113 = 0;
		LOC113 = nimIntToStr(LOC112);
		write_156969(s, LOC113);
	}
	break;
	case ((NU8) 28):
	{
		NimStringDesc* x;
		x = getstring_217406(a);
		{
			if (!x == 0) goto LA117;
			write_156969(s, ((NimStringDesc*) &TMP4738));
		}
		goto LA115;
		LA117: ;
		{
			NI LOC120;
			NimStringDesc* LOC123;
			LOC120 = 0;
			LOC120 = validateutf8_223774(x);
			if (!(LOC120 == ((NI) -1))) goto LA121;
			LOC123 = 0;
			LOC123 = escapejson_266743(x);
			write_156969(s, LOC123);
		}
		goto LA115;
		LA121: ;
		{
			NI i;
			write_156969(s, ((NimStringDesc*) &TMP4739));
			i = ((NI) 0);
			{
				NIM_CHAR c_271248;
				NI i_271330;
				NI L_271332;
				c_271248 = 0;
				i_271330 = ((NI) 0);
				L_271332 = (x ? x->Sup.len : 0);
				{
					while (1) {
						NimStringDesc* LOC132;
						if (!(i_271330 < L_271332)) goto LA127;
						c_271248 = x->data[i_271330];
						{
							if (!(((NI) 0) < i)) goto LA130;
							write_156969(s, ((NimStringDesc*) &TMP4740));
						}
						LA130: ;
						LOC132 = 0;
						LOC132 = nimIntToStr(((NI) (((NU8)(c_271248)))));
						write_156969(s, LOC132);
						i += ((NI) 1);
						i_271330 += ((NI) 1);
					} LA127: ;
				}
			}
			write_156969(s, ((NimStringDesc*) &TMP4743));
		}
		LA115: ;
	}
	break;
	case ((NU8) 31) ... ((NU8) 35):
	case ((NU8) 40) ... ((NU8) 44):
	{
		NI64 LOC134;
		NimStringDesc* LOC135;
		LOC134 = 0;
		LOC134 = getbiggestint_213203(a);
		LOC135 = 0;
		LOC135 = nimInt64ToStr(LOC134);
		write_156969(s, LOC135);
	}
	break;
	case ((NU8) 36) ... ((NU8) 39):
	{
		NF LOC137;
		NimStringDesc* LOC138;
		LOC137 = 0;
		LOC137 = getbiggestfloat_217003(a);
		LOC138 = 0;
		LOC138 = nimFloatToStr(LOC137);
		write_156969(s, LOC138);
	}
	break;
	}
}

static N_INLINE(Any206100, newany_206836)(void* value, TNimType* rawtype) {
	Any206100 result;
	memset((void*)(&result), 0, sizeof(result));
	result.value = value;
	result.rawtypeptr = ((void*) (rawtype));
	return result;
}

static N_INLINE(Any206100, toany_273018)(Debuginfo204010* x) {
	Any206100 result;
	memset((void*)(&result), 0, sizeof(result));
	result = newany_206836(((void*) (x)), ((TNimType*) ((&NTI204010))));
	return result;
}

N_NIMCALL(void, store_273008)(Streamobj156818* s, Debuginfo204010* data) {
	Intset269031 stored;
	Debuginfo204010 d;
	Any206100 LOC1;
	memset((void*)(&stored), 0, sizeof(stored));
	chckNil((void*)(&stored));
	memset((void*)(&stored), 0, sizeof(stored));
	initintset_269885((&stored));
	memset((void*)(&d), 0, sizeof(d));
	d.version = (*data).version;
	d.files = (*data).files;
	d.enums = (*data).enums;
	d.conflicts = (*data).conflicts;
	LOC1 = toany_273018((&d));
	storeany_271006(s, LOC1, (&stored));
}
NIM_EXTERNC N_NOINLINE(void, stdlib_marshalInit000)(void) {
}

NIM_EXTERNC N_NOINLINE(void, stdlib_marshalDatInit000)(void) {
}

